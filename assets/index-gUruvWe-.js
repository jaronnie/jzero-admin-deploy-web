import{U as xt,S as wt,o as _t,n as Nt,p as Ct,q as Rt,a as St,e as An,r as Dt,s as Kt,b as Tt,_ as Lt,u as Pt,g as Et,h as At,i as Ot,t as Nn,v as Ft,l as It,N as $t}from"./business-BwmClmLW.js";import{d as ue,V as C,K as se,L as $,aM as Bt,P as W,aN as On,T as zt,X as Fn,Y as Je,aO as Mt,a as H,aP as gn,a0 as Ut,a1 as In,a2 as jt,r as Y,aQ as Le,aa as $n,ab as Ee,aR as Ht,as as Vt,s as qt,aS as dn,aT as Wt,aU as ae,i as Gt,W as Xt,aV as We,aW as Yt,O as Ke,Q as Te,aX as Cn,aY as Qt,aZ as cn,an as Rn,a_ as Jt,a$ as $e,b0 as Sn,a6 as Zt,b1 as ea,b2 as Dn,a9 as j,aq as Ge,aD as Pe,b3 as Xe,b4 as Kn,b5 as na,ay as le,a8 as ta,b6 as Tn,aB as Qe,y as hn,aC as vn,$ as S,b7 as Ye,c as ye,o as ge,aI as aa,w as T,e as Ln,f as R,aF as Bn,t as be,h as w,aH as zn,B as ze,g as xe,aJ as oa,p as Mn,b8 as la,q as Un,b as jn,a4 as ia,a5 as ra,aK as Be,b9 as sa,ba as da,I as Hn,A as ca,a3 as ua,aL as fa}from"./index-G-5gy2Sp.js";import{u as ha,a as ga,b as Vn,_ as va}from"./form-dJUYMXat.js";import{_ as mn}from"./Space-CZDBDeiJ.js";import{_ as ma,a as pa,b as ya,c as ba}from"./round-refresh-bnE2OQk4.js";import{a as ka}from"./Grid-DSQmO2Wl.js";function qn(e){return typeof e=="string"?`s-${e}`:`n-${e}`}const xa=ue({name:"Switcher",render(){return C("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32"},C("path",{d:"M12 8l10 8l-10 8z"}))}}),wa=se([se("@keyframes spin-rotate",`
 from {
 transform: rotate(0);
 }
 to {
 transform: rotate(360deg);
 }
 `),$("spin-container",`
 position: relative;
 `,[$("spin-body",`
 position: absolute;
 top: 50%;
 left: 50%;
 transform: translateX(-50%) translateY(-50%);
 `,[Bt()])]),$("spin-body",`
 display: inline-flex;
 align-items: center;
 justify-content: center;
 flex-direction: column;
 `),$("spin",`
 display: inline-flex;
 height: var(--n-size);
 width: var(--n-size);
 font-size: var(--n-size);
 color: var(--n-color);
 `,[W("rotate",`
 animation: spin-rotate 2s linear infinite;
 `)]),$("spin-description",`
 display: inline-block;
 font-size: var(--n-font-size);
 color: var(--n-text-color);
 transition: color .3s var(--n-bezier);
 margin-top: 8px;
 `),$("spin-content",`
 opacity: 1;
 transition: opacity .3s var(--n-bezier);
 pointer-events: all;
 `,[W("spinning",`
 user-select: none;
 -webkit-user-select: none;
 pointer-events: none;
 opacity: var(--n-opacity-spinning);
 `)])]),_a={small:20,medium:18,large:16},Na=Object.assign(Object.assign({},Je.props),{contentClass:String,contentStyle:[Object,String],description:String,stroke:String,size:{type:[String,Number],default:"medium"},show:{type:Boolean,default:!0},strokeWidth:Number,rotate:{type:Boolean,default:!0},spinning:{type:Boolean,validator:()=>!0,default:void 0},delay:Number}),Ca=ue({name:"Spin",props:Na,setup(e){const{mergedClsPrefixRef:t,inlineThemeDisabled:o}=Fn(e),l=Je("Spin","-spin",wa,Mt,e,t),s=H(()=>{const{size:d}=e,{common:{cubicBezierEaseInOut:f},self:y}=l.value,{opacitySpinning:A,color:_,textColor:P}=y,D=typeof d=="number"?gn(d):y[Ut("size",d)];return{"--n-bezier":f,"--n-opacity-spinning":A,"--n-size":D,"--n-color":_,"--n-text-color":P}}),i=o?In("spin",H(()=>{const{size:d}=e;return typeof d=="number"?String(d):d[0]}),s,e):void 0,x=jt(e,["spinning","show"]),g=Y(!1);return Le(d=>{let f;if(x.value){const{delay:y}=e;if(y){f=window.setTimeout(()=>{g.value=!0},y),d(()=>{clearTimeout(f)});return}}g.value=x.value}),{mergedClsPrefix:t,active:g,mergedStrokeWidth:H(()=>{const{strokeWidth:d}=e;if(d!==void 0)return d;const{size:f}=e;return _a[typeof f=="number"?"medium":f]}),cssVars:o?void 0:s,themeClass:i==null?void 0:i.themeClass,onRender:i==null?void 0:i.onRender}},render(){var e,t;const{$slots:o,mergedClsPrefix:l,description:s}=this,i=o.icon&&this.rotate,x=(s||o.description)&&C("div",{class:`${l}-spin-description`},s||((e=o.description)===null||e===void 0?void 0:e.call(o))),g=o.icon?C("div",{class:[`${l}-spin-body`,this.themeClass]},C("div",{class:[`${l}-spin`,i&&`${l}-spin--rotate`],style:o.default?"":this.cssVars},o.icon()),x):C("div",{class:[`${l}-spin-body`,this.themeClass]},C(On,{clsPrefix:l,style:o.default?"":this.cssVars,stroke:this.stroke,"stroke-width":this.mergedStrokeWidth,class:`${l}-spin`}),x);return(t=this.onRender)===null||t===void 0||t.call(this),o.default?C("div",{class:[`${l}-spin-container`,this.themeClass],style:this.cssVars},C("div",{class:[`${l}-spin-content`,this.active&&`${l}-spin-content--spinning`,this.contentClass],style:this.contentStyle},o),C(zt,{name:"fade-in-transition"},{default:()=>this.active?g:null})):g}}),Wn=$n("n-tree-select"),Me=$n("n-tree"),Ra=ue({name:"NTreeSwitcher",props:{clsPrefix:{type:String,required:!0},indent:{type:Number,required:!0},expanded:Boolean,selected:Boolean,hide:Boolean,loading:Boolean,onClick:Function,tmNode:{type:Object,required:!0}},setup(e){const{renderSwitcherIconRef:t}=Ee(Me,null);return()=>{const{clsPrefix:o,expanded:l,hide:s,indent:i,onClick:x}=e;return C("span",{"data-switcher":!0,class:[`${o}-tree-node-switcher`,l&&`${o}-tree-node-switcher--expanded`,s&&`${o}-tree-node-switcher--hide`],style:{width:`${i}px`},onClick:x},C("div",{class:`${o}-tree-node-switcher__icon`},C(Ht,null,{default:()=>{if(e.loading)return C(On,{clsPrefix:o,key:"loading",radius:85,strokeWidth:20});const{value:g}=t;return g?g({expanded:e.expanded,selected:e.selected,option:e.tmNode.rawNode}):C(Vt,{clsPrefix:o,key:"switcher"},{default:()=>C(xa,null)})}})))}}}),Sa=ue({name:"NTreeNodeCheckbox",props:{clsPrefix:{type:String,required:!0},indent:{type:Number,required:!0},right:Boolean,focusable:Boolean,disabled:Boolean,checked:Boolean,indeterminate:Boolean,onCheck:Function},setup(e){const t=Ee(Me);function o(s){const{onCheck:i}=e;i&&i(s)}function l(s){o(s)}return{handleUpdateValue:l,mergedTheme:t.mergedThemeRef}},render(){const{clsPrefix:e,mergedTheme:t,checked:o,indeterminate:l,disabled:s,focusable:i,indent:x,handleUpdateValue:g}=this;return C("span",{class:[`${e}-tree-node-checkbox`,this.right&&`${e}-tree-node-checkbox--right`],style:{width:`${x}px`},"data-checkbox":!0},C(qt,{focusable:i,disabled:s,theme:t.peers.Checkbox,themeOverrides:t.peerOverrides.Checkbox,checked:o,indeterminate:l,onUpdateChecked:g}))}}),Da=ue({name:"TreeNodeContent",props:{clsPrefix:{type:String,required:!0},disabled:Boolean,checked:Boolean,selected:Boolean,onClick:Function,onDragstart:Function,tmNode:{type:Object,required:!0},nodeProps:Object},setup(e){const{renderLabelRef:t,renderPrefixRef:o,renderSuffixRef:l,labelFieldRef:s}=Ee(Me),i=Y(null);function x(d){const{onClick:f}=e;f&&f(d)}function g(d){x(d)}return{selfRef:i,renderLabel:t,renderPrefix:o,renderSuffix:l,labelField:s,handleClick:g}},render(){const{clsPrefix:e,labelField:t,nodeProps:o,checked:l=!1,selected:s=!1,renderLabel:i,renderPrefix:x,renderSuffix:g,handleClick:d,onDragstart:f,tmNode:{rawNode:y,rawNode:{prefix:A,suffix:_,[t]:P}}}=this;return C("span",Object.assign({},o,{ref:"selfRef",class:[`${e}-tree-node-content`,o==null?void 0:o.class],onClick:d,draggable:f===void 0?void 0:!0,onDragstart:f}),x||A?C("div",{class:`${e}-tree-node-content__prefix`},x?x({option:y,selected:s,checked:l}):dn(A)):null,C("div",{class:`${e}-tree-node-content__text`},i?i({option:y,selected:s,checked:l}):dn(P)),g||_?C("div",{class:`${e}-tree-node-content__suffix`},g?g({option:y,selected:s,checked:l}):dn(_)):null)}});function Pn({position:e,offsetLevel:t,indent:o,el:l}){const s={position:"absolute",boxSizing:"border-box",right:0};if(e==="inside")s.left=0,s.top=0,s.bottom=0,s.borderRadius="inherit",s.boxShadow="inset 0 0 0 2px var(--n-drop-mark-color)";else{const i=e==="before"?"top":"bottom";s[i]=0,s.left=`${l.offsetLeft+6-t*o}px`,s.height="2px",s.backgroundColor="var(--n-drop-mark-color)",s.transformOrigin=i,s.borderRadius="1px",s.transform=e==="before"?"translateY(-4px)":"translateY(4px)"}return C("div",{style:s})}function Ka({dropPosition:e,node:t}){return t.isLeaf===!1||t.children?!0:e!=="inside"}function Ta(e){return H(()=>e.leafOnly?"child":e.checkStrategy)}function pe(e,t){return!!e.rawNode[t]}function Gn(e,t,o,l){e==null||e.forEach(s=>{o(s),Gn(s[t],t,o,l),l(s)})}function La(e,t,o,l,s){const i=new Set,x=new Set,g=[];return Gn(e,l,d=>{if(g.push(d),s(t,d)){x.add(d[o]);for(let f=g.length-2;f>=0;--f)if(!i.has(g[f][o]))i.add(g[f][o]);else return}},()=>{g.pop()}),{expandedKeys:Array.from(i),highlightKeySet:x}}if(Wt&&Image){const e=new Image;e.src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw=="}function Pa(e,t,o,l,s){const i=new Set,x=new Set,g=new Set,d=[],f=[],y=[];function A(P){P.forEach(D=>{if(y.push(D),t(o,D)){i.add(D[l]),g.add(D[l]);for(let k=y.length-2;k>=0;--k){const h=y[k][l];if(!x.has(h))x.add(h),i.has(h)&&i.delete(h);else break}}const v=D[s];v&&A(v),y.pop()})}A(e);function _(P,D){P.forEach(v=>{const k=v[l],h=i.has(k),K=x.has(k);if(!h&&!K)return;const N=v[s];if(N)if(h)D.push(v);else{d.push(k);const B=Object.assign(Object.assign({},v),{[s]:[]});D.push(B),_(N,B[s])}else D.push(v)})}return _(e,f),{filteredTree:f,highlightKeySet:g,expandedKeys:d}}const Xn=ue({name:"TreeNode",props:{clsPrefix:{type:String,required:!0},tmNode:{type:Object,required:!0}},setup(e){const t=Ee(Me),{droppingNodeParentRef:o,droppingMouseNodeRef:l,draggingNodeRef:s,droppingPositionRef:i,droppingOffsetLevelRef:x,nodePropsRef:g,indentRef:d,blockLineRef:f,checkboxPlacementRef:y,checkOnClickRef:A,disabledFieldRef:_,showLineRef:P,renderSwitcherIconRef:D,overrideDefaultNodeClickBehaviorRef:v}=t,k=ae(()=>!!e.tmNode.rawNode.checkboxDisabled),h=ae(()=>pe(e.tmNode,_.value)),K=ae(()=>t.disabledRef.value||h.value),N=H(()=>{const{value:m}=g;if(m)return m({option:e.tmNode.rawNode})}),B=Y(null),Q={value:null};Gt(()=>{Q.value=B.value.$el});function ne(){const m=()=>{const{tmNode:I}=e;if(!I.isLeaf&&!I.shallowLoaded){if(!t.loadingKeysRef.value.has(I.key))t.loadingKeysRef.value.add(I.key);else return;const{onLoadRef:{value:V}}=t;V&&V(I.rawNode).then(X=>{X!==!1&&t.handleSwitcherClick(I)}).finally(()=>{t.loadingKeysRef.value.delete(I.key)})}else t.handleSwitcherClick(I)};D.value?setTimeout(m,0):m()}const L=ae(()=>!h.value&&t.selectableRef.value&&(t.internalTreeSelect?t.mergedCheckStrategyRef.value!=="child"||t.multipleRef.value&&t.cascadeRef.value||e.tmNode.isLeaf:!0)),c=ae(()=>t.checkableRef.value&&(t.cascadeRef.value||t.mergedCheckStrategyRef.value!=="child"||e.tmNode.isLeaf)),u=ae(()=>t.displayedCheckedKeysRef.value.includes(e.tmNode.key)),E=ae(()=>{const{value:m}=c;if(!m)return!1;const{value:I}=A,{tmNode:V}=e;return typeof I=="boolean"?!V.disabled&&I:I(e.tmNode.rawNode)});function O(m){const{value:I}=t.expandOnClickRef,{value:V}=L,{value:X}=E;if(!V&&!I&&!X||We(m,"checkbox")||We(m,"switcher"))return;const{tmNode:te}=e;V&&t.handleSelect(te),I&&!te.isLeaf&&ne(),X&&J(!u.value)}function G(m){var I,V;if(!(We(m,"checkbox")||We(m,"switcher"))){if(!K.value){const X=v.value;let te=!1;if(X)switch(X({option:e.tmNode.rawNode})){case"toggleCheck":te=!0,J(!u.value);break;case"toggleSelect":te=!0,t.handleSelect(e.tmNode);break;case"toggleExpand":te=!0,ne(),te=!0;break;case"none":te=!0,te=!0;return}te||O(m)}(V=(I=N.value)===null||I===void 0?void 0:I.onClick)===null||V===void 0||V.call(I,m)}}function he(m){f.value||G(m)}function F(m){f.value&&G(m)}function J(m){t.handleCheck(e.tmNode,m)}function Z(m){t.handleDragStart({event:m,node:e.tmNode})}function Ae(m){m.currentTarget===m.target&&t.handleDragEnter({event:m,node:e.tmNode})}function M(m){m.preventDefault(),t.handleDragOver({event:m,node:e.tmNode})}function ve(m){t.handleDragEnd({event:m,node:e.tmNode})}function Oe(m){m.currentTarget===m.target&&t.handleDragLeave({event:m,node:e.tmNode})}function Ze(m){m.preventDefault(),i.value!==null&&t.handleDrop({event:m,node:e.tmNode,dropPosition:i.value})}const en=H(()=>{const{clsPrefix:m}=e,{value:I}=d;if(P.value){const V=[];let X=e.tmNode.parent;for(;X;)X.isLastChild?V.push(C("div",{class:`${m}-tree-node-indent`},C("div",{style:{width:`${I}px`}}))):V.push(C("div",{class:[`${m}-tree-node-indent`,`${m}-tree-node-indent--show-line`]},C("div",{style:{width:`${I}px`}}))),X=X.parent;return V.reverse()}else return Xt(e.tmNode.level,C("div",{class:`${e.clsPrefix}-tree-node-indent`},C("div",{style:{width:`${I}px`}})))});return{showDropMark:ae(()=>{const{value:m}=s;if(!m)return;const{value:I}=i;if(!I)return;const{value:V}=l;if(!V)return;const{tmNode:X}=e;return X.key===V.key}),showDropMarkAsParent:ae(()=>{const{value:m}=o;if(!m)return!1;const{tmNode:I}=e,{value:V}=i;return V==="before"||V==="after"?m.key===I.key:!1}),pending:ae(()=>t.pendingNodeKeyRef.value===e.tmNode.key),loading:ae(()=>t.loadingKeysRef.value.has(e.tmNode.key)),highlight:ae(()=>{var m;return(m=t.highlightKeySetRef.value)===null||m===void 0?void 0:m.has(e.tmNode.key)}),checked:u,indeterminate:ae(()=>t.displayedIndeterminateKeysRef.value.includes(e.tmNode.key)),selected:ae(()=>t.mergedSelectedKeysRef.value.includes(e.tmNode.key)),expanded:ae(()=>t.mergedExpandedKeysRef.value.includes(e.tmNode.key)),disabled:K,checkable:c,mergedCheckOnClick:E,checkboxDisabled:k,selectable:L,expandOnClick:t.expandOnClickRef,internalScrollable:t.internalScrollableRef,draggable:t.draggableRef,blockLine:f,nodeProps:N,checkboxFocusable:t.internalCheckboxFocusableRef,droppingPosition:i,droppingOffsetLevel:x,indent:d,checkboxPlacement:y,showLine:P,contentInstRef:B,contentElRef:Q,indentNodes:en,handleCheck:J,handleDrop:Ze,handleDragStart:Z,handleDragEnter:Ae,handleDragOver:M,handleDragEnd:ve,handleDragLeave:Oe,handleLineClick:F,handleContentClick:he,handleSwitcherClick:ne}},render(){const{tmNode:e,clsPrefix:t,checkable:o,expandOnClick:l,selectable:s,selected:i,checked:x,highlight:g,draggable:d,blockLine:f,indent:y,indentNodes:A,disabled:_,pending:P,internalScrollable:D,nodeProps:v,checkboxPlacement:k}=this,h=d&&!_?{onDragenter:this.handleDragEnter,onDragleave:this.handleDragLeave,onDragend:this.handleDragEnd,onDrop:this.handleDrop,onDragover:this.handleDragOver}:void 0,K=D?qn(e.key):void 0,N=k==="right",B=o?C(Sa,{indent:y,right:N,focusable:this.checkboxFocusable,disabled:_||this.checkboxDisabled,clsPrefix:t,checked:this.checked,indeterminate:this.indeterminate,onCheck:this.handleCheck}):null;return C("div",Object.assign({class:`${t}-tree-node-wrapper`},h),C("div",Object.assign({},f?v:void 0,{class:[`${t}-tree-node`,{[`${t}-tree-node--selected`]:i,[`${t}-tree-node--checkable`]:o,[`${t}-tree-node--highlight`]:g,[`${t}-tree-node--pending`]:P,[`${t}-tree-node--disabled`]:_,[`${t}-tree-node--selectable`]:s,[`${t}-tree-node--clickable`]:s||l||this.mergedCheckOnClick},v==null?void 0:v.class],"data-key":K,draggable:d&&f,onClick:this.handleLineClick,onDragstart:d&&f&&!_?this.handleDragStart:void 0}),A,e.isLeaf&&this.showLine?C("div",{class:[`${t}-tree-node-indent`,`${t}-tree-node-indent--show-line`,e.isLeaf&&`${t}-tree-node-indent--is-leaf`,e.isLastChild&&`${t}-tree-node-indent--last-child`]},C("div",{style:{width:`${y}px`}})):C(Ra,{clsPrefix:t,expanded:this.expanded,selected:i,loading:this.loading,hide:e.isLeaf,tmNode:this.tmNode,indent:y,onClick:this.handleSwitcherClick}),N?null:B,C(Da,{ref:"contentInstRef",clsPrefix:t,checked:x,selected:i,onClick:this.handleContentClick,nodeProps:f?void 0:v,onDragstart:d&&!f&&!_?this.handleDragStart:void 0,tmNode:e}),d?this.showDropMark?Pn({el:this.contentElRef.value,position:this.droppingPosition,offsetLevel:this.droppingOffsetLevel,indent:y}):this.showDropMarkAsParent?Pn({el:this.contentElRef.value,position:"inside",offsetLevel:this.droppingOffsetLevel,indent:y}):null:null,N?B:null))}});function Ea({props:e,fNodesRef:t,mergedExpandedKeysRef:o,mergedSelectedKeysRef:l,mergedCheckedKeysRef:s,handleCheck:i,handleSelect:x,handleSwitcherClick:g}){const{value:d}=l,f=Ee(Wn,null),y=f?f.pendingNodeKeyRef:Y(d.length?d[d.length-1]:null);function A(_){var P;if(!e.keyboard)return{enterBehavior:null};const{value:D}=y;let v=null;if(D===null){if((_.key==="ArrowDown"||_.key==="ArrowUp")&&_.preventDefault(),["ArrowDown","ArrowUp","ArrowLeft","ArrowRight"].includes(_.key)&&D===null){const{value:k}=t;let h=0;for(;h<k.length;){if(!k[h].disabled){y.value=k[h].key;break}h+=1}}}else{const{value:k}=t;let h=k.findIndex(K=>K.key===D);if(!~h)return{enterBehavior:null};if(_.key==="Enter"){const K=k[h];switch(v=((P=e.overrideDefaultNodeClickBehavior)===null||P===void 0?void 0:P.call(e,{option:K.rawNode}))||null,v){case"toggleCheck":i(K,!s.value.includes(K.key));break;case"toggleSelect":x(K);break;case"toggleExpand":g(K);break;case"none":break;case"default":default:v="default",x(K)}}else if(_.key==="ArrowDown")for(_.preventDefault(),h+=1;h<k.length;){if(!k[h].disabled){y.value=k[h].key;break}h+=1}else if(_.key==="ArrowUp")for(_.preventDefault(),h-=1;h>=0;){if(!k[h].disabled){y.value=k[h].key;break}h-=1}else if(_.key==="ArrowLeft"){const K=k[h];if(K.isLeaf||!o.value.includes(D)){const N=K.getParent();N&&(y.value=N.key)}else g(K)}else if(_.key==="ArrowRight"){const K=k[h];if(K.isLeaf)return{enterBehavior:null};if(!o.value.includes(D))g(K);else for(h+=1;h<k.length;){if(!k[h].disabled){y.value=k[h].key;break}h+=1}}}return{enterBehavior:v}}return{pendingNodeKeyRef:y,handleKeydown:A}}const Aa=ue({name:"TreeMotionWrapper",props:{clsPrefix:{type:String,required:!0},height:Number,nodes:{type:Array,required:!0},mode:{type:String,required:!0},onAfterEnter:{type:Function,required:!0}},render(){const{clsPrefix:e}=this;return C(Yt,{onAfterEnter:this.onAfterEnter,appear:!0,reverse:this.mode==="collapse"},{default:()=>C("div",{class:[`${e}-tree-motion-wrapper`,`${e}-tree-motion-wrapper--${this.mode}`],style:{height:gn(this.height)}},this.nodes.map(t=>C(Xn,{clsPrefix:e,tmNode:t})))})}}),un=Qt(),Oa=$("tree",`
 font-size: var(--n-font-size);
 outline: none;
`,[se("ul, li",`
 margin: 0;
 padding: 0;
 list-style: none;
 `),se(">",[$("tree-node",[se("&:first-child","margin-top: 0;")])]),$("tree-motion-wrapper",[W("expand",[Cn({duration:"0.2s"})]),W("collapse",[Cn({duration:"0.2s",reverse:!0})])]),$("tree-node-wrapper",`
 box-sizing: border-box;
 padding: var(--n-node-wrapper-padding);
 `),$("tree-node",`
 transform: translate3d(0,0,0);
 position: relative;
 display: flex;
 border-radius: var(--n-node-border-radius);
 transition: background-color .3s var(--n-bezier);
 `,[W("highlight",[$("tree-node-content",[Te("text","border-bottom-color: var(--n-node-text-color-disabled);")])]),W("disabled",[$("tree-node-content",`
 color: var(--n-node-text-color-disabled);
 cursor: not-allowed;
 `)]),Ke("disabled",[W("clickable",[$("tree-node-content",`
 cursor: pointer;
 `)])])]),W("block-node",[$("tree-node-content",`
 flex: 1;
 min-width: 0;
 `)]),Ke("block-line",[$("tree-node",[Ke("disabled",[$("tree-node-content",[se("&:hover","background: var(--n-node-color-hover);")]),W("selectable",[$("tree-node-content",[se("&:active","background: var(--n-node-color-pressed);")])]),W("pending",[$("tree-node-content",`
 background: var(--n-node-color-hover);
 `)]),W("selected",[$("tree-node-content","background: var(--n-node-color-active);")])]),W("selected",[$("tree-node-content","background: var(--n-node-color-active);")])])]),W("block-line",[$("tree-node",[Ke("disabled",[se("&:hover","background: var(--n-node-color-hover);"),W("pending",`
 background: var(--n-node-color-hover);
 `),W("selectable",[Ke("selected",[se("&:active","background: var(--n-node-color-pressed);")])]),W("selected","background: var(--n-node-color-active);")]),W("selected","background: var(--n-node-color-active);"),W("disabled",`
 cursor: not-allowed;
 `)])]),$("tree-node-indent",`
 flex-grow: 0;
 flex-shrink: 0;
 `,[W("show-line","position: relative",[se("&::before",`
 position: absolute;
 left: 50%;
 border-left: 1px solid var(--n-line-color);
 transition: border-color .3s var(--n-bezier);
 transform: translate(-50%);
 content: "";
 top: var(--n-line-offset-top);
 bottom: var(--n-line-offset-bottom);
 `),W("last-child",[se("&::before",`
 bottom: 50%;
 `)]),W("is-leaf",[se("&::after",`
 position: absolute;
 content: "";
 left: calc(50% + 0.5px);
 right: 0;
 bottom: 50%;
 transition: border-color .3s var(--n-bezier);
 border-bottom: 1px solid var(--n-line-color);
 `)])]),Ke("show-line","height: 0;")]),$("tree-node-switcher",`
 cursor: pointer;
 display: inline-flex;
 flex-shrink: 0;
 height: var(--n-node-content-height);
 align-items: center;
 justify-content: center;
 transition: transform .15s var(--n-bezier);
 vertical-align: bottom;
 `,[Te("icon",`
 position: relative;
 height: 14px;
 width: 14px;
 display: flex;
 color: var(--n-arrow-color);
 transition: color .3s var(--n-bezier);
 font-size: 14px;
 `,[$("icon",[un]),$("base-loading",`
 color: var(--n-loading-color);
 position: absolute;
 left: 0;
 top: 0;
 right: 0;
 bottom: 0;
 `,[un]),$("base-icon",[un])]),W("hide","visibility: hidden;"),W("expanded","transform: rotate(90deg);")]),$("tree-node-checkbox",`
 display: inline-flex;
 height: var(--n-node-content-height);
 vertical-align: bottom;
 align-items: center;
 justify-content: center;
 `),$("tree-node-content",`
 user-select: none;
 position: relative;
 display: inline-flex;
 align-items: center;
 min-height: var(--n-node-content-height);
 box-sizing: border-box;
 line-height: var(--n-line-height);
 vertical-align: bottom;
 padding: 0 6px 0 4px;
 cursor: default;
 border-radius: var(--n-node-border-radius);
 color: var(--n-node-text-color);
 transition:
 color .3s var(--n-bezier),
 background-color .3s var(--n-bezier),
 border-color .3s var(--n-bezier);
 `,[se("&:last-child","margin-bottom: 0;"),Te("prefix",`
 display: inline-flex;
 margin-right: 8px;
 `),Te("text",`
 border-bottom: 1px solid #0000;
 transition: border-color .3s var(--n-bezier);
 flex-grow: 1;
 max-width: 100%;
 `),Te("suffix",`
 display: inline-flex;
 `)]),Te("empty","margin: auto;")]);var Fa=function(e,t,o,l){function s(i){return i instanceof o?i:new o(function(x){x(i)})}return new(o||(o=Promise))(function(i,x){function g(y){try{f(l.next(y))}catch(A){x(A)}}function d(y){try{f(l.throw(y))}catch(A){x(A)}}function f(y){y.done?i(y.value):s(y.value).then(g,d)}f((l=l.apply(e,[])).next())})};function En(e,t,o,l){return{getIsGroup(){return!1},getKey(i){return i[e]},getChildren:l||(i=>i[t]),getDisabled(i){return!!(i[o]||i.checkboxDisabled)}}}const Ia={allowCheckingNotLoaded:Boolean,filter:Function,defaultExpandAll:Boolean,expandedKeys:Array,keyField:{type:String,default:"key"},labelField:{type:String,default:"label"},childrenField:{type:String,default:"children"},disabledField:{type:String,default:"disabled"},defaultExpandedKeys:{type:Array,default:()=>[]},indeterminateKeys:Array,renderSwitcherIcon:Function,onUpdateIndeterminateKeys:[Function,Array],"onUpdate:indeterminateKeys":[Function,Array],onUpdateExpandedKeys:[Function,Array],"onUpdate:expandedKeys":[Function,Array],overrideDefaultNodeClickBehavior:Function},$a=Object.assign(Object.assign(Object.assign(Object.assign({},Je.props),{accordion:Boolean,showIrrelevantNodes:{type:Boolean,default:!0},data:{type:Array,default:()=>[]},expandOnDragenter:{type:Boolean,default:!0},expandOnClick:Boolean,checkOnClick:{type:[Boolean,Function],default:!1},cancelable:{type:Boolean,default:!0},checkable:Boolean,draggable:Boolean,blockNode:Boolean,blockLine:Boolean,showLine:Boolean,disabled:Boolean,checkedKeys:Array,defaultCheckedKeys:{type:Array,default:()=>[]},selectedKeys:Array,defaultSelectedKeys:{type:Array,default:()=>[]},multiple:Boolean,pattern:{type:String,default:""},onLoad:Function,cascade:Boolean,selectable:{type:Boolean,default:!0},scrollbarProps:Object,indent:{type:Number,default:24},allowDrop:{type:Function,default:Ka},animated:{type:Boolean,default:!0},checkboxPlacement:{type:String,default:"left"},virtualScroll:Boolean,watchProps:Array,renderLabel:Function,renderPrefix:Function,renderSuffix:Function,nodeProps:Function,keyboard:{type:Boolean,default:!0},getChildren:Function,onDragenter:[Function,Array],onDragleave:[Function,Array],onDragend:[Function,Array],onDragstart:[Function,Array],onDragover:[Function,Array],onDrop:[Function,Array],onUpdateCheckedKeys:[Function,Array],"onUpdate:checkedKeys":[Function,Array],onUpdateSelectedKeys:[Function,Array],"onUpdate:selectedKeys":[Function,Array]}),Ia),{internalTreeSelect:Boolean,internalScrollable:Boolean,internalScrollablePadding:String,internalRenderEmpty:Function,internalHighlightKeySet:Object,internalUnifySelectCheck:Boolean,internalCheckboxFocusable:{type:Boolean,default:!0},internalFocusable:{type:Boolean,default:!0},checkStrategy:{type:String,default:"all"},leafOnly:Boolean}),Ba=ue({name:"Tree",props:$a,setup(e){const{mergedClsPrefixRef:t,inlineThemeDisabled:o,mergedRtlRef:l}=Fn(e),s=Zt("Tree",l,t),i=Je("Tree","-tree",Oa,ea,e,t),x=Y(null),g=Y(null),d=Y(null);function f(){var n;return(n=d.value)===null||n===void 0?void 0:n.listElRef}function y(){var n;return(n=d.value)===null||n===void 0?void 0:n.itemsElRef}const A=H(()=>{const{filter:n}=e;if(n)return n;const{labelField:a}=e;return(r,p)=>{if(!r.length)return!0;const b=p[a];return typeof b=="string"?b.toLowerCase().includes(r.toLowerCase()):!1}}),_=H(()=>{const{pattern:n}=e;return n?!n.length||!A.value?{filteredTree:e.data,highlightKeySet:null,expandedKeys:void 0}:Pa(e.data,A.value,n,e.keyField,e.childrenField):{filteredTree:e.data,highlightKeySet:null,expandedKeys:void 0}}),P=H(()=>Dn(e.showIrrelevantNodes?e.data:_.value.filteredTree,En(e.keyField,e.childrenField,e.disabledField,e.getChildren))),D=Ee(Wn,null),v=e.internalTreeSelect?D.dataTreeMate:H(()=>e.showIrrelevantNodes?P.value:Dn(e.data,En(e.keyField,e.childrenField,e.disabledField,e.getChildren))),{watchProps:k}=e,h=Y([]);k!=null&&k.includes("defaultCheckedKeys")?Le(()=>{h.value=e.defaultCheckedKeys}):h.value=e.defaultCheckedKeys;const K=j(e,"checkedKeys"),N=Ge(K,h),B=H(()=>v.value.getCheckedKeys(N.value,{cascade:e.cascade,allowNotLoaded:e.allowCheckingNotLoaded})),Q=Ta(e),ne=H(()=>B.value.checkedKeys),L=H(()=>{const{indeterminateKeys:n}=e;return n!==void 0?n:B.value.indeterminateKeys}),c=Y([]);k!=null&&k.includes("defaultSelectedKeys")?Le(()=>{c.value=e.defaultSelectedKeys}):c.value=e.defaultSelectedKeys;const u=j(e,"selectedKeys"),E=Ge(u,c),O=Y([]),G=n=>{O.value=e.defaultExpandAll?v.value.getNonLeafKeys():n===void 0?e.defaultExpandedKeys:n};k!=null&&k.includes("defaultExpandedKeys")?Le(()=>{G(void 0)}):Le(()=>{G(e.defaultExpandedKeys)});const he=j(e,"expandedKeys"),F=Ge(he,O),J=H(()=>P.value.getFlattenedNodes(F.value)),{pendingNodeKeyRef:Z,handleKeydown:Ae}=Ea({props:e,mergedCheckedKeysRef:N,mergedSelectedKeysRef:E,fNodesRef:J,mergedExpandedKeysRef:F,handleCheck:ln,handleSelect:rn,handleSwitcherClick:bn});let M=null,ve=null;const Oe=Y(new Set),Ze=H(()=>e.internalHighlightKeySet||_.value.highlightKeySet),en=Ge(Ze,Oe),m=Y(new Set),I=H(()=>F.value.filter(n=>!m.value.has(n)));let V=0;const X=Y(null),te=Y(null),Ue=Y(null),je=Y(null),He=Y(0),Yn=H(()=>{const{value:n}=te;return n?n.parent:null});let nn=!1;Pe(j(e,"data"),()=>{nn=!0,Xe(()=>{nn=!1}),m.value.clear(),Z.value=null,Ie()},{deep:!1});let tn=!1;const an=()=>{tn=!0,Xe(()=>{tn=!1})};let Fe;Pe(j(e,"pattern"),(n,a)=>{if(e.showIrrelevantNodes)if(Fe=void 0,n){const{expandedKeys:r,highlightKeySet:p}=La(e.data,e.pattern,e.keyField,e.childrenField,A.value);Oe.value=p,an(),_e(r,ie(r),{node:null,action:"filter"})}else Oe.value=new Set;else if(!n.length)Fe!==void 0&&(an(),_e(Fe,ie(Fe),{node:null,action:"filter"}));else{a.length||(Fe=F.value);const{expandedKeys:r}=_.value;r!==void 0&&(an(),_e(r,ie(r),{node:null,action:"filter"}))}});function pn(n){return Fa(this,void 0,void 0,function*(){const{onLoad:a}=e;if(!a){yield Promise.resolve();return}const{value:r}=m;if(!r.has(n.key)){r.add(n.key);try{(yield a(n.rawNode))===!1&&Ne()}catch(p){console.error(p),Ne()}r.delete(n.key)}})}Le(()=>{var n;const{value:a}=P;if(!a)return;const{getNode:r}=a;(n=F.value)===null||n===void 0||n.forEach(p=>{const b=r(p);b&&!b.shallowLoaded&&pn(b)})});const we=Y(!1),me=Y([]);Pe(I,(n,a)=>{if(!e.animated||tn){Xe(Ve);return}if(nn)return;const r=$e(i.value.self.nodeHeight),p=new Set(a);let b=null,q=null;for(const U of n)if(!p.has(U)){if(b!==null)return;b=U}const oe=new Set(n);for(const U of a)if(!oe.has(U)){if(q!==null)return;q=U}if(b===null&&q===null)return;const{virtualScroll:re}=e,Re=(re?d.value.listElRef:x.value).offsetHeight,Se=Math.ceil(Re/r)+1;let de;if(b!==null&&(de=a),q!==null&&(de===void 0?de=n:de=de.filter(U=>U!==q)),we.value=!0,me.value=P.value.getFlattenedNodes(de),b!==null){const U=me.value.findIndex(ce=>ce.key===b);if(~U){const ce=me.value[U].children;if(ce){const fe=Kn(ce,n);me.value.splice(U+1,0,{__motion:!0,mode:"expand",height:re?fe.length*r:void 0,nodes:re?fe.slice(0,Se):fe})}}}if(q!==null){const U=me.value.findIndex(ce=>ce.key===q);if(~U){const ce=me.value[U].children;if(!ce)return;we.value=!0;const fe=Kn(ce,n);me.value.splice(U+1,0,{__motion:!0,mode:"collapse",height:re?fe.length*r:void 0,nodes:re?fe.slice(0,Se):fe})}}});const Qn=H(()=>na(J.value)),Jn=H(()=>we.value?me.value:J.value);function Ve(){const{value:n}=g;n&&n.sync()}function Zn(){we.value=!1,e.virtualScroll&&Xe(Ve)}function ie(n){const{getNode:a}=v.value;return n.map(r=>{var p;return((p=a(r))===null||p===void 0?void 0:p.rawNode)||null})}function _e(n,a,r){const{"onUpdate:expandedKeys":p,onUpdateExpandedKeys:b}=e;O.value=n,p&&le(p,n,a,r),b&&le(b,n,a,r)}function yn(n,a,r){const{"onUpdate:checkedKeys":p,onUpdateCheckedKeys:b}=e;h.value=n,b&&le(b,n,a,r),p&&le(p,n,a,r)}function et(n,a){const{"onUpdate:indeterminateKeys":r,onUpdateIndeterminateKeys:p}=e;r&&le(r,n,a),p&&le(p,n,a)}function on(n,a,r){const{"onUpdate:selectedKeys":p,onUpdateSelectedKeys:b}=e;c.value=n,b&&le(b,n,a,r),p&&le(p,n,a,r)}function nt(n){const{onDragenter:a}=e;a&&le(a,n)}function tt(n){const{onDragleave:a}=e;a&&le(a,n)}function at(n){const{onDragend:a}=e;a&&le(a,n)}function ot(n){const{onDragstart:a}=e;a&&le(a,n)}function lt(n){const{onDragover:a}=e;a&&le(a,n)}function it(n){const{onDrop:a}=e;a&&le(a,n)}function Ie(){rt(),ke()}function rt(){X.value=null}function ke(){He.value=0,te.value=null,Ue.value=null,je.value=null,Ne()}function Ne(){M&&(window.clearTimeout(M),M=null),ve=null}function ln(n,a){if(e.disabled||pe(n,e.disabledField))return;if(e.internalUnifySelectCheck&&!e.multiple){rn(n);return}const r=a?"check":"uncheck",{checkedKeys:p,indeterminateKeys:b}=v.value[r](n.key,ne.value,{cascade:e.cascade,checkStrategy:Q.value,allowNotLoaded:e.allowCheckingNotLoaded});yn(p,ie(p),{node:n.rawNode,action:r}),et(b,ie(b))}function st(n){if(e.disabled)return;const{key:a}=n,{value:r}=F,p=r.findIndex(b=>b===a);if(~p){const b=Array.from(r);b.splice(p,1),_e(b,ie(b),{node:n.rawNode,action:"collapse"})}else{const b=P.value.getNode(a);if(!b||b.isLeaf)return;let q;if(e.accordion){const oe=new Set(n.siblings.map(({key:re})=>re));q=r.filter(re=>!oe.has(re)),q.push(a)}else q=r.concat(a);_e(q,ie(q),{node:n.rawNode,action:"expand"})}}function bn(n){e.disabled||we.value||st(n)}function rn(n){if(!(e.disabled||!e.selectable)){if(Z.value=n.key,e.internalUnifySelectCheck){const{value:{checkedKeys:a,indeterminateKeys:r}}=B;e.multiple?ln(n,!(a.includes(n.key)||r.includes(n.key))):yn([n.key],ie([n.key]),{node:n.rawNode,action:"check"})}if(e.multiple){const a=Array.from(E.value),r=a.findIndex(p=>p===n.key);~r?e.cancelable&&a.splice(r,1):~r||a.push(n.key),on(a,ie(a),{node:n.rawNode,action:~r?"unselect":"select"})}else E.value.includes(n.key)?e.cancelable&&on([],[],{node:n.rawNode,action:"unselect"}):on([n.key],ie([n.key]),{node:n.rawNode,action:"select"})}}function dt(n){if(M&&(window.clearTimeout(M),M=null),n.isLeaf)return;ve=n.key;const a=()=>{if(ve!==n.key)return;const{value:r}=Ue;if(r&&r.key===n.key&&!F.value.includes(n.key)){const p=F.value.concat(n.key);_e(p,ie(p),{node:n.rawNode,action:"expand"})}M=null,ve=null};n.shallowLoaded?M=window.setTimeout(()=>{a()},1e3):M=window.setTimeout(()=>{pn(n).then(()=>{a()})},1e3)}function ct({event:n,node:a}){!e.draggable||e.disabled||pe(a,e.disabledField)||(kn({event:n,node:a},!1),nt({event:n,node:a.rawNode}))}function ut({event:n,node:a}){!e.draggable||e.disabled||pe(a,e.disabledField)||tt({event:n,node:a.rawNode})}function ft(n){n.target===n.currentTarget&&ke()}function ht({event:n,node:a}){Ie(),!(!e.draggable||e.disabled||pe(a,e.disabledField))&&at({event:n,node:a.rawNode})}function gt({event:n,node:a}){!e.draggable||e.disabled||pe(a,e.disabledField)||(V=n.clientX,X.value=a,ot({event:n,node:a.rawNode}))}function kn({event:n,node:a},r=!0){var p;if(!e.draggable||e.disabled||pe(a,e.disabledField))return;const{value:b}=X;if(!b)return;const{allowDrop:q,indent:oe}=e;r&&lt({event:n,node:a.rawNode});const re=n.currentTarget,{height:Re,top:Se}=re.getBoundingClientRect(),de=n.clientY-Se;let U;q({node:a.rawNode,dropPosition:"inside",phase:"drag"})?de<=8?U="before":de>=Re-8?U="after":U="inside":de<=Re/2?U="before":U="after";const{value:fe}=Qn;let z,ee;const De=fe(a.key);if(De===null){ke();return}let qe=!1;U==="inside"?(z=a,ee="inside"):U==="before"?a.isFirstChild?(z=a,ee="before"):(z=J.value[De-1],ee="after"):(z=a,ee="after"),!z.isLeaf&&F.value.includes(z.key)&&(qe=!0,ee==="after"&&(z=J.value[De+1],z?ee="before":(z=a,ee="inside")));const wn=z;if(Ue.value=wn,!qe&&b.isLastChild&&b.key===z.key&&(ee="after"),ee==="after"){let _n=V-n.clientX,sn=0;for(;_n>=oe/2&&z.parent!==null&&z.isLastChild&&sn<1;)_n-=oe,sn+=1,z=z.parent;He.value=sn}else He.value=0;if((b.contains(z)||ee==="inside"&&((p=b.parent)===null||p===void 0?void 0:p.key)===z.key)&&!(b.key===wn.key&&b.key===z.key)){ke();return}if(!q({node:z.rawNode,dropPosition:ee,phase:"drag"})){ke();return}if(b.key===z.key)Ne();else if(ve!==z.key)if(ee==="inside"){if(e.expandOnDragenter){if(dt(z),!z.shallowLoaded&&ve!==z.key){Ie();return}}else if(!z.shallowLoaded){Ie();return}}else Ne();else ee!=="inside"&&Ne();je.value=ee,te.value=z}function vt({event:n,node:a,dropPosition:r}){if(!e.draggable||e.disabled||pe(a,e.disabledField))return;const{value:p}=X,{value:b}=te,{value:q}=je;if(!(!p||!b||!q)&&e.allowDrop({node:b.rawNode,dropPosition:q,phase:"drag"})&&p.key!==b.key){if(q==="before"){const oe=p.getNext({includeDisabled:!0});if(oe&&oe.key===b.key){ke();return}}if(q==="after"){const oe=p.getPrev({includeDisabled:!0});if(oe&&oe.key===b.key){ke();return}}it({event:n,node:b.rawNode,dragNode:p.rawNode,dropPosition:r}),Ie()}}function mt(){Ve()}function pt(){Ve()}function yt(n){var a;if(e.virtualScroll||e.internalScrollable){const{value:r}=g;if(!((a=r==null?void 0:r.containerRef)===null||a===void 0)&&a.contains(n.relatedTarget))return;Z.value=null}else{const{value:r}=x;if(r!=null&&r.contains(n.relatedTarget))return;Z.value=null}}Pe(Z,n=>{var a,r;if(n!==null){if(e.virtualScroll)(a=d.value)===null||a===void 0||a.scrollTo({key:n});else if(e.internalScrollable){const{value:p}=g;if(p===null)return;const b=(r=p.contentRef)===null||r===void 0?void 0:r.querySelector(`[data-key="${qn(n)}"]`);if(!b)return;p.scrollTo({el:b})}}}),ta(Me,{loadingKeysRef:m,highlightKeySetRef:en,displayedCheckedKeysRef:ne,displayedIndeterminateKeysRef:L,mergedSelectedKeysRef:E,mergedExpandedKeysRef:F,mergedThemeRef:i,mergedCheckStrategyRef:Q,nodePropsRef:j(e,"nodeProps"),disabledRef:j(e,"disabled"),checkableRef:j(e,"checkable"),selectableRef:j(e,"selectable"),expandOnClickRef:j(e,"expandOnClick"),onLoadRef:j(e,"onLoad"),draggableRef:j(e,"draggable"),blockLineRef:j(e,"blockLine"),indentRef:j(e,"indent"),cascadeRef:j(e,"cascade"),checkOnClickRef:j(e,"checkOnClick"),checkboxPlacementRef:e.checkboxPlacement,droppingMouseNodeRef:Ue,droppingNodeParentRef:Yn,draggingNodeRef:X,droppingPositionRef:je,droppingOffsetLevelRef:He,fNodesRef:J,pendingNodeKeyRef:Z,showLineRef:j(e,"showLine"),disabledFieldRef:j(e,"disabledField"),internalScrollableRef:j(e,"internalScrollable"),internalCheckboxFocusableRef:j(e,"internalCheckboxFocusable"),internalTreeSelect:e.internalTreeSelect,renderLabelRef:j(e,"renderLabel"),renderPrefixRef:j(e,"renderPrefix"),renderSuffixRef:j(e,"renderSuffix"),renderSwitcherIconRef:j(e,"renderSwitcherIcon"),labelFieldRef:j(e,"labelField"),multipleRef:j(e,"multiple"),overrideDefaultNodeClickBehaviorRef:j(e,"overrideDefaultNodeClickBehavior"),handleSwitcherClick:bn,handleDragEnd:ht,handleDragEnter:ct,handleDragLeave:ut,handleDragStart:gt,handleDrop:vt,handleDragOver:kn,handleSelect:rn,handleCheck:ln});function bt(n,a){var r,p;typeof n=="number"?(r=d.value)===null||r===void 0||r.scrollTo(n,a||0):(p=d.value)===null||p===void 0||p.scrollTo(n)}const kt={handleKeydown:Ae,scrollTo:bt,getCheckedData:()=>{if(!e.checkable)return{keys:[],options:[]};const{checkedKeys:n}=B.value;return{keys:n,options:ie(n)}},getIndeterminateData:()=>{if(!e.checkable)return{keys:[],options:[]};const{indeterminateKeys:n}=B.value;return{keys:n,options:ie(n)}}},xn=H(()=>{const{common:{cubicBezierEaseInOut:n},self:{fontSize:a,nodeBorderRadius:r,nodeColorHover:p,nodeColorPressed:b,nodeColorActive:q,arrowColor:oe,loadingColor:re,nodeTextColor:Re,nodeTextColorDisabled:Se,dropMarkColor:de,nodeWrapperPadding:U,nodeHeight:ce,lineHeight:fe,lineColor:z}}=i.value,ee=cn(U,"top"),De=cn(U,"bottom"),qe=gn($e(ce)-$e(ee)-$e(De));return{"--n-arrow-color":oe,"--n-loading-color":re,"--n-bezier":n,"--n-font-size":a,"--n-node-border-radius":r,"--n-node-color-active":q,"--n-node-color-hover":p,"--n-node-color-pressed":b,"--n-node-text-color":Re,"--n-node-text-color-disabled":Se,"--n-drop-mark-color":de,"--n-node-wrapper-padding":U,"--n-line-offset-top":`-${ee}`,"--n-line-offset-bottom":`-${De}`,"--n-node-content-height":qe,"--n-line-height":fe,"--n-line-color":z}}),Ce=o?In("tree",void 0,xn,e):void 0;return Object.assign(Object.assign({},kt),{mergedClsPrefix:t,mergedTheme:i,rtlEnabled:s,fNodes:Jn,aip:we,selfElRef:x,virtualListInstRef:d,scrollbarInstRef:g,handleFocusout:yt,handleDragLeaveTree:ft,handleScroll:mt,getScrollContainer:f,getScrollContent:y,handleAfterEnter:Zn,handleResize:pt,cssVars:o?void 0:xn,themeClass:Ce==null?void 0:Ce.themeClass,onRender:Ce==null?void 0:Ce.onRender})},render(){var e;const{fNodes:t,internalRenderEmpty:o}=this;if(!t.length&&o)return o();const{mergedClsPrefix:l,blockNode:s,blockLine:i,draggable:x,disabled:g,internalFocusable:d,checkable:f,handleKeydown:y,rtlEnabled:A,handleFocusout:_,scrollbarProps:P}=this,D=d&&!g,v=D?"0":void 0,k=[`${l}-tree`,A&&`${l}-tree--rtl`,f&&`${l}-tree--checkable`,(i||s)&&`${l}-tree--block-node`,i&&`${l}-tree--block-line`],h=N=>"__motion"in N?C(Aa,{height:N.height,nodes:N.nodes,clsPrefix:l,mode:N.mode,onAfterEnter:this.handleAfterEnter}):C(Xn,{key:N.key,tmNode:N,clsPrefix:l});if(this.virtualScroll){const{mergedTheme:N,internalScrollablePadding:B}=this,Q=cn(B||"0");return C(Sn,Object.assign({},P,{ref:"scrollbarInstRef",onDragleave:x?this.handleDragLeaveTree:void 0,container:this.getScrollContainer,content:this.getScrollContent,class:k,theme:N.peers.Scrollbar,themeOverrides:N.peerOverrides.Scrollbar,tabindex:v,onKeydown:D?y:void 0,onFocusout:D?_:void 0}),{default:()=>{var ne;return(ne=this.onRender)===null||ne===void 0||ne.call(this),t.length?C(Jt,{ref:"virtualListInstRef",items:this.fNodes,itemSize:$e(N.self.nodeHeight),ignoreItemResize:this.aip,paddingTop:Q.top,paddingBottom:Q.bottom,class:this.themeClass,style:[this.cssVars,{paddingLeft:Q.left,paddingRight:Q.right}],onScroll:this.handleScroll,onResize:this.handleResize,showScrollbar:!1,itemResizable:!0},{default:({item:L})=>h(L)}):Rn(this.$slots.empty,()=>[C(Tn,{class:`${l}-tree__empty`,theme:this.mergedTheme.peers.Empty,themeOverrides:this.mergedTheme.peerOverrides.Empty})])}})}const{internalScrollable:K}=this;return k.push(this.themeClass),(e=this.onRender)===null||e===void 0||e.call(this),K?C(Sn,Object.assign({},P,{class:k,tabindex:v,onKeydown:D?y:void 0,onFocusout:D?_:void 0,style:this.cssVars,contentStyle:{padding:this.internalScrollablePadding}}),{default:()=>C("div",{onDragleave:x?this.handleDragLeaveTree:void 0,ref:"selfElRef"},this.fNodes.map(h))}):C("div",{class:k,tabindex:v,ref:"selfElRef",style:this.cssVars,onKeydown:D?y:void 0,onFocusout:D?_:void 0,onDragleave:x?this.handleDragLeaveTree:void 0},t.length?t.map(h):Rn(this.$slots.empty,()=>[C(Tn,{class:`${l}-tree__empty`,theme:this.mergedTheme.peers.Empty,themeOverrides:this.mergedTheme.peerOverrides.Empty})]))}}),za={class:"flex-y-center gap-16px pb-12px"},Ma=ue({name:"MenuAuthModal",__name:"menu-auth-modal",props:Qe({roleId:{}},{visible:{type:Boolean,default:!1},visibleModifiers:{}}),emits:["update:visible"],setup(e){const t=e,{loading:o,startLoading:l,endLoading:s}=hn(),{loading:i,startLoading:x,endLoading:g}=hn(),d=Y(!1),f=vn(e,"visible");function y(){f.value=!1}const A=H(()=>S("common.edit")+S("page.manage.role.menuAuth")),_=Ye("");async function P(){const{error:c,data:u}=await _t(t.roleId);c||(_.value=u)}async function D(c){var O;const u={roleId:t.roleId,home:c};d.value=!0;const{error:E}=await xt(u);d.value=!1,!E&&(_.value=c,(O=window.$message)==null||O.success(S("common.editHomeSuccess")))}const v=Ye([]);async function k(){const{error:c,data:u}=await Nt(t.roleId);c||(v.value=u)}const h=H(()=>v.value.map(u=>({label:u,value:u}))),K=Ye([]),N=Ye([]);function B(){function c(u){if(u.children&&u.children.length>0){const E=u.children.some(O=>N.value.includes(O.id));E&&!N.value.includes(u.id)?N.value.push(u.id):!E&&N.value.includes(u.id)&&N.value.splice(N.value.indexOf(u.id),1),u.children.forEach(O=>{O.children&&O.children.length>0&&c(O)})}}K.value.forEach(u=>{c(u)})}async function Q(){l();const{error:c,data:u}=await Ct();c||(K.value=u);const E={roleId:t.roleId},{error:O,data:G}=await Rt(E);s(),O||(N.value=G);function he(F){if(F.children&&F.children.length>0){const J=F.children.every(Z=>N.value.includes(Z.id));J&&!N.value.includes(F.id)?N.value.push(F.id):!J&&N.value.includes(F.id)&&N.value.splice(N.value.indexOf(F.id),1),F.children.forEach(Z=>he(Z))}}K.value.forEach(F=>{he(F)})}async function ne(){var E,O;B();const c={roleId:t.roleId,menuIds:N.value};x();const{error:u}=await wt(c);g(),u||((O=(E=window.$message)==null?void 0:E.success)==null||O.call(E,S("common.modifySuccess")),y())}function L(){P(),k(),Q()}return Pe(f,c=>{c&&L()}),(c,u)=>{const E=zn,O=Ca,G=mn,he=Ba,F=ze,J=aa;return ge(),ye(J,{show:f.value,"onUpdate:show":u[1]||(u[1]=Z=>f.value=Z),loading:!0,title:A.value,preset:"card",class:"w-480px"},{footer:T(()=>[R(G,{justify:"end"},{default:T(()=>[R(F,{size:"small",class:"mt-16px",onClick:y},{default:T(()=>[xe(be(w(S)("common.cancel")),1)]),_:1}),R(F,{loading:w(i),type:"primary",size:"small",class:"mt-16px",onClick:ne},{default:T(()=>[xe(be(w(S)("common.confirm")),1)]),_:1},8,["loading"])]),_:1})]),default:T(()=>[Ln("div",za,[Ln("div",null,be(w(S)("page.manage.menu.home")),1),R(E,{value:_.value,options:h.value,size:"small",class:"w-160px","onUpdate:value":D},null,8,["value","options"]),d.value?(ge(),ye(O,{key:0,size:"small"})):Bn("",!0)]),w(o)?(ge(),ye(G,{key:0,class:"h-280px",justify:"center",align:"center"},{default:T(()=>[R(O,{size:"small"})]),_:1})):(ge(),ye(he,{key:1,"checked-keys":N.value,"onUpdate:checkedKeys":u[0]||(u[0]=Z=>N.value=Z),data:K.value,"key-field":"id",checkable:"","expand-on-click":"","virtual-scroll":"","block-line":"",cascade:"",class:"h-280px"},null,8,["checked-keys","data"]))]),_:1},8,["show","title"])}}}),Ua=ue({name:"RoleOperateDrawer",__name:"role-operate-drawer",props:Qe({operateType:{},rowData:{}},{visible:{type:Boolean,default:!1},visibleModifiers:{}}),emits:Qe(["submitted"],["update:visible"]),setup(e,{emit:t}){const o=e,l=t,s=vn(e,"visible"),{formRef:i,validate:x,restoreValidation:g}=ha(),{defaultRequiredRule:d}=ga(),{bool:f,setTrue:y}=oa(),{loading:A,startLoading:_,endLoading:P}=hn(),D=H(()=>({add:S("page.manage.role.addRole"),edit:S("page.manage.role.editRole")})[o.operateType]),v=Mn(k());function k(){return{roleName:"",roleCode:"",roleDesc:"",status:null}}const h={roleName:d,roleCode:d,status:d},K=H(()=>{var L;return((L=o.rowData)==null?void 0:L.id)||-1}),N=H(()=>o.operateType==="edit");function B(){Object.assign(v,k()),o.operateType==="edit"&&o.rowData&&Object.assign(v,o.rowData)}function Q(){s.value=!1}async function ne(){var L,c,u;if(o.operateType==="add"){await x();const E={roleName:v.roleName,roleCode:v.roleCode,roleDesc:v.roleDesc,status:v.status};_();const{error:O}=await Dt(E);O||((L=window.$message)==null||L.success(S("common.addSuccess")),l("submitted"),Q()),P()}else if(o.operateType==="edit"){await x();const E={id:(c=o.rowData)==null?void 0:c.id,roleName:v.roleName,roleCode:v.roleCode,roleDesc:v.roleDesc,status:v.status};_();const{error:O}=await Kt(E);O||((u=window.$message)==null||u.success(S("common.updateSuccess")),l("submitted"),Q()),P()}}return Pe(s,()=>{s.value&&(B(),g())}),(L,c)=>{const u=Un,E=va,O=Tt,G=St,he=Vn,F=ze,J=mn,Z=la,Ae=sa;return ge(),ye(Ae,{show:s.value,"onUpdate:show":c[5]||(c[5]=M=>s.value=M),"display-directive":"show",width:360},{default:T(()=>[R(Z,{title:D.value,"native-scrollbar":!1,closable:""},{footer:T(()=>[R(J,{size:16},{default:T(()=>[R(F,{onClick:Q},{default:T(()=>[xe(be(w(S)("common.cancel")),1)]),_:1}),R(F,{loading:w(A),type:"primary",onClick:ne},{default:T(()=>[xe(be(w(S)("common.confirm")),1)]),_:1},8,["loading"])]),_:1})]),default:T(()=>[R(he,{ref_key:"formRef",ref:i,model:v,rules:h},{default:T(()=>[R(E,{label:w(S)("page.manage.role.roleName"),path:"roleName"},{default:T(()=>[R(u,{value:v.roleName,"onUpdate:value":c[0]||(c[0]=M=>v.roleName=M),placeholder:w(S)("page.manage.role.form.roleName")},null,8,["value","placeholder"])]),_:1},8,["label"]),R(E,{label:w(S)("page.manage.role.roleCode"),path:"roleCode"},{default:T(()=>[R(u,{value:v.roleCode,"onUpdate:value":c[1]||(c[1]=M=>v.roleCode=M),placeholder:w(S)("page.manage.role.form.roleCode")},null,8,["value","placeholder"])]),_:1},8,["label"]),R(E,{label:w(S)("page.manage.role.roleStatus"),path:"status"},{default:T(()=>[R(G,{value:v.status,"onUpdate:value":c[2]||(c[2]=M=>v.status=M)},{default:T(()=>[(ge(!0),jn(ia,null,ra(w(An),M=>(ge(),ye(O,{key:M.value,value:M.value,label:w(S)(M.label)},null,8,["value","label"]))),128))]),_:1},8,["value"])]),_:1},8,["label"]),R(E,{label:w(S)("page.manage.role.roleDesc"),path:"roleDesc"},{default:T(()=>[R(u,{value:v.roleDesc,"onUpdate:value":c[3]||(c[3]=M=>v.roleDesc=M),placeholder:w(S)("page.manage.role.form.roleDesc")},null,8,["value","placeholder"])]),_:1},8,["label"])]),_:1},8,["model"]),N.value?(ge(),ye(J,{key:0},{default:T(()=>[R(F,{onClick:w(y)},{default:T(()=>[xe(be(w(S)("page.manage.role.menuAuth")),1)]),_:1},8,["onClick"]),R(Ma,{visible:w(f),"onUpdate:visible":c[4]||(c[4]=M=>Be(f)?f.value=M:null),"role-id":K.value},null,8,["visible","role-id"])]),_:1})):Bn("",!0)]),_:1},8,["title"])]),_:1},8,["show"])}}}),ja=ue({name:"RoleSearch",__name:"role-search",props:{model:{required:!0},modelModifiers:{}},emits:Qe(["reset","search"],["update:model"]),setup(e,{emit:t}){const o=t,l=vn(e,"model");function s(){o("reset")}function i(){o("search")}return(x,g)=>{const d=Un,f=Lt,y=zn,A=ya,_=ze,P=ba,D=mn,v=ka,k=Vn,h=pa,K=ma,N=Hn;return ge(),ye(N,{bordered:!1,size:"small",class:"card-wrapper"},{default:T(()=>[R(K,{"default-expanded-names":["role-search"]},{default:T(()=>[R(h,{title:w(S)("common.search"),name:"role-search"},{default:T(()=>[R(k,{model:l.value,"label-placement":"left","label-width":80},{default:T(()=>[R(v,{responsive:"screen","item-responsive":""},{default:T(()=>[R(f,{span:"24 s:12 m:6",label:w(S)("page.manage.role.roleName"),path:"roleName",class:"pr-24px"},{default:T(()=>[R(d,{value:l.value.roleName,"onUpdate:value":g[0]||(g[0]=B=>l.value.roleName=B),placeholder:w(S)("page.manage.role.form.roleName")},null,8,["value","placeholder"])]),_:1},8,["label"]),R(f,{span:"24 s:12 m:6",label:w(S)("page.manage.role.roleCode"),path:"roleCode",class:"pr-24px"},{default:T(()=>[R(d,{value:l.value.roleCode,"onUpdate:value":g[1]||(g[1]=B=>l.value.roleCode=B),placeholder:w(S)("page.manage.role.form.roleCode")},null,8,["value","placeholder"])]),_:1},8,["label"]),R(f,{span:"24 s:12 m:6",label:w(S)("page.manage.role.roleStatus"),path:"status",class:"pr-24px"},{default:T(()=>[R(y,{value:l.value.status,"onUpdate:value":g[2]||(g[2]=B=>l.value.status=B),placeholder:w(S)("page.manage.role.form.roleStatus"),options:w(da)(w(An)),clearable:""},null,8,["value","placeholder","options"])]),_:1},8,["label"]),R(f,{span:"24 s:12 m:6"},{default:T(()=>[R(D,{class:"w-full",justify:"end"},{default:T(()=>[R(_,{onClick:s},{icon:T(()=>[R(A,{class:"text-icon"})]),default:T(()=>[xe(" "+be(w(S)("common.reset")),1)]),_:1}),R(_,{type:"primary",ghost:"",onClick:i},{icon:T(()=>[R(P,{class:"text-icon"})]),default:T(()=>[xe(" "+be(w(S)("common.search")),1)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["model"])]),_:1},8,["title"])]),_:1})]),_:1})}}}),Ha={class:"min-h-500px flex-col-stretch gap-16px overflow-hidden lt-sm:overflow-auto"};function fn(e){return typeof e=="function"||Object.prototype.toString.call(e)==="[object Object]"&&!fa(e)}const Qa=ue({name:"manage_role",__name:"index",setup(e){const t=ca(),o=Mn({}),{columns:l,columnChecks:s,data:i,loading:x,getData:g,getDataByPage:d,mobilePagination:f,searchParams:y,resetSearchParams:A}=Pt({apiFn:Ft,apiParams:{current:1,size:10,status:null,roleName:null,roleCode:null},columns:()=>[{type:"selection",align:"center",width:48},{key:"index",title:S("common.index"),width:64,align:"center"},{key:"roleName",title:S("page.manage.role.roleName"),align:"center",minWidth:120},{key:"roleCode",title:S("page.manage.role.roleCode"),align:"center",minWidth:120},{key:"roleDesc",title:S("page.manage.role.roleDesc"),minWidth:120},{key:"status",title:S("page.manage.role.roleStatus"),align:"center",width:100,render:L=>{if(L.status===null)return null;const c={1:"success",2:"warning"},u=S(It[L.status]);return R(ua,{type:c[L.status]},fn(u)?u:{default:()=>[u]})}},{key:"operate",title:S("common.operate"),align:"center",width:130,render:L=>{let c;return R("div",{class:"flex-center gap-8px"},[R(ze,{type:"primary",ghost:!0,size:"small",onClick:()=>ne(L.id)},fn(c=S("common.edit"))?c:{default:()=>[c]}),R($t,{onPositiveClick:()=>Q(L.id)},{default:()=>S("common.confirmDelete"),trigger:()=>{let u;return R(ze,{loading:o[L.id],type:"error",ghost:!0,size:"small"},fn(u=S("common.delete"))?u:{default:()=>[u]})}})])}}]}),{drawerVisible:_,operateType:P,editingData:D,handleAdd:v,handleEdit:k,checkedRowKeys:h,onBatchDeleted:K,onDeleted:N}=Et(i,g);async function B(){const L=h.value.map(u=>Number.parseInt(u,10));L.forEach(u=>{o[u]=!0});const{error:c}=await Nn(L);L.forEach(u=>{o[u]=!1}),!c&&K()}async function Q(L){const c=[L];o[L]=!0;const{error:u}=await Nn(c);o[L]=!1,!u&&N()}function ne(L){k(L)}return(L,c)=>{const u=Ot,E=At,O=Hn;return ge(),jn("div",Ha,[R(ja,{model:w(y),"onUpdate:model":c[0]||(c[0]=G=>Be(y)?y.value=G:null),onReset:w(A),onSearch:w(d)},null,8,["model","onReset","onSearch"]),R(O,{title:w(S)("page.manage.role.title"),bordered:!1,size:"small",class:"sm:flex-1-hidden card-wrapper"},{"header-extra":T(()=>[R(u,{columns:w(s),"onUpdate:columns":c[1]||(c[1]=G=>Be(s)?s.value=G:null),"disabled-delete":w(h).length===0,loading:w(x),"add-auth":"manage:role:add","delete-auth":"manage:role:delete",onAdd:w(v),onDelete:B,onRefresh:w(g)},null,8,["columns","disabled-delete","loading","onAdd","onRefresh"])]),default:T(()=>[R(E,{"checked-row-keys":w(h),"onUpdate:checkedRowKeys":c[2]||(c[2]=G=>Be(h)?h.value=G:null),columns:w(l),data:w(i),size:"small","flex-height":!w(t).isMobile,"scroll-x":702,loading:w(x),remote:"","row-key":G=>G.id,pagination:w(f),class:"sm:h-full"},null,8,["checked-row-keys","columns","data","flex-height","loading","row-key","pagination"]),R(Ua,{visible:w(_),"onUpdate:visible":c[3]||(c[3]=G=>Be(_)?_.value=G:null),"operate-type":w(P),"row-data":w(D),onSubmitted:w(d)},null,8,["visible","operate-type","row-data","onSubmitted"])]),_:1},8,["title"])])}}});export{Qa as default};
