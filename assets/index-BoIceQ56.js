import{r as Z,a as $,k as Q,l as X,d as U,m as W,b as B,o as N,e as c,n as J,u as F,p as M,c as E,w as t,f as a,q as D,h as e,$ as l,s as Y,g as P,t as y,B as I,v as z,x as G,y as j,S as ee,R as oe,z as ne,A as ae,C as te,D as le,E as se,F as ie,G as re,T as de,H as ce,I as pe,J as ue}from"./index-DXsFtJvj.js";import{u as T,a as O,_ as V,b as K,R as me,c as fe}from"./form-DVyG6H_E.js";import{_ as q}from"./Space-Dl4vR6s8.js";function ge(b){const p=Z(0),u=$(()=>Math.ceil(p.value/60)),C=$(()=>p.value>0),{pause:r,resume:k}=Q(()=>{p.value>0?p.value-=1:r()},{immediate:!1});function x(m=b){p.value=60*m,k()}function v(){p.value=0,r()}return X(()=>{r()}),{count:u,isCounting:C,start:x,stop:v}}const _e={class:"absolute-lt z-1 size-full overflow-hidden"},we={class:"absolute -right-300px -top-900px lt-sm:-right-100px lt-sm:-top-1170px"},ve={height:"1337",width:"1337"},he={id:"linearGradient-2",x1:"0.79",y1:"0.62",x2:"0.21",y2:"0.86"},ye=["stop-color"],Ce=["stop-color"],xe={class:"absolute -bottom-400px -left-200px lt-sm:-bottom-760px lt-sm:-left-100px"},be={height:"896",width:"967.8852157128662"},ke={id:"linearGradient-3",x1:"0.5",y1:"0",x2:"0.5",y2:"1"},Pe=["stop-color"],Se=["stop-color"],$e=U({name:"WaveBg",__name:"wave-bg",props:{themeColor:{}},setup(b){const _=b,p=$(()=>W(_.themeColor,200)),u=$(()=>W(_.themeColor,500));return(C,r)=>(N(),B("div",_e,[c("div",we,[(N(),B("svg",ve,[c("defs",null,[r[0]||(r[0]=c("path",{id:"path-1",opacity:"1","fill-rule":"evenodd",d:"M1337,668.5 C1337,1037.455193874239 1037.455193874239,1337 668.5,1337 C523.6725684305388,1337 337,1236 370.50000000000006,1094 C434.03835568300906,824.6732385973953 6.906089672974592e-14,892.6277623047779 0,668.5000000000001 C0,299.5448061257611 299.5448061257609,1.1368683772161603e-13 668.4999999999999,0 C1037.455193874239,0 1337,299.544806125761 1337,668.5Z"},null,-1)),c("linearGradient",he,[c("stop",{offset:"0","stop-color":p.value,"stop-opacity":"1"},null,8,ye),c("stop",{offset:"1","stop-color":u.value,"stop-opacity":"1"},null,8,Ce)])]),r[1]||(r[1]=c("g",{opacity:"1"},[c("use",{"xlink:href":"#path-1",fill:"url(#linearGradient-2)","fill-opacity":"1"})],-1))]))]),c("div",xe,[(N(),B("svg",be,[c("defs",null,[r[2]||(r[2]=c("path",{id:"path-2",opacity:"1","fill-rule":"evenodd",d:"M896,448 C1142.6325445712241,465.5747656464056 695.2579309733121,896 448,896 C200.74206902668806,896 5.684341886080802e-14,695.2579309733121 0,448.0000000000001 C0,200.74206902668806 200.74206902668791,5.684341886080802e-14 447.99999999999994,0 C695.2579309733121,0 475,418 896,448Z"},null,-1)),c("linearGradient",ke,[c("stop",{offset:"0","stop-color":u.value,"stop-opacity":"1"},null,8,Pe),c("stop",{offset:"1","stop-color":p.value,"stop-opacity":"1"},null,8,Se)])]),r[3]||(r[3]=c("g",{opacity:"1"},[c("use",{"xlink:href":"#path-2",fill:"url(#linearGradient-3)","fill-opacity":"1"})],-1))]))])]))}}),Le={class:"flex-y-center justify-between"},Ne={class:"flex-y-center justify-between gap-12px"},Re=U({name:"PwdLogin",__name:"pwd-login",setup(b){const _=J(),{toggleLoginModule:p}=F(),{formRef:u,validate:C}=T(),r=M({username:"admin",password:"123456"}),k=$(()=>{const{formRules:v}=O();return{username:v.username,password:v.pwd}});async function x(){await C(),await _.loginByPwd(r.username,r.password)}return(v,m)=>{const w=D,S=V,n=Y,i=I,d=q,s=K;return N(),E(s,{ref_key:"formRef",ref:u,model:r,rules:k.value,size:"large","show-label":!1,onKeyup:G(x,["enter"])},{default:t(()=>[a(S,{path:"username"},{default:t(()=>[a(w,{value:r.username,"onUpdate:value":m[0]||(m[0]=o=>r.username=o),placeholder:e(l)("page.login.common.usernamePlaceholder")},null,8,["value","placeholder"])]),_:1}),a(S,{path:"password"},{default:t(()=>[a(w,{value:r.password,"onUpdate:value":m[1]||(m[1]=o=>r.password=o),type:"password","show-password-on":"click",placeholder:e(l)("page.login.common.passwordPlaceholder")},null,8,["value","placeholder"])]),_:1}),a(d,{vertical:"",size:24},{default:t(()=>[c("div",Le,[a(n,null,{default:t(()=>[P(y(e(l)("page.login.pwdLogin.rememberMe")),1)]),_:1}),a(i,{quaternary:"",onClick:m[2]||(m[2]=o=>e(p)("reset-pwd"))},{default:t(()=>[P(y(e(l)("page.login.pwdLogin.forgetPassword")),1)]),_:1})]),a(i,{type:"primary",size:"large",round:"",block:"",loading:e(_).loginLoading,onClick:x},{default:t(()=>[P(y(e(l)("common.confirm")),1)]),_:1},8,["loading"]),c("div",Ne,[a(i,{class:"flex-1",block:"",onClick:m[3]||(m[3]=o=>e(p)("code-login"))},{default:t(()=>[P(y(e(l)(e(z)["code-login"],{type:e(l)("page.login.codeLogin.emailType")})),1)]),_:1}),a(i,{class:"flex-1",block:"",onClick:m[4]||(m[4]=o=>e(p)("register"))},{default:t(()=>[P(y(e(l)(e(z).register)),1)]),_:1})])]),_:1})]),_:1},8,["model","rules"])}}});function H(){const{loading:b,startLoading:_,endLoading:p}=j(),{count:u,start:C,stop:r,isCounting:k}=ge(30),x=Z(""),v=$(()=>{let n=l("page.login.codeLogin.getCode");const i=l("page.login.codeLogin.reGetCode",{time:u.value});return b.value&&(n=""),k.value&&(n=i),n});function m(n){var i,d,s,o;return n.trim()===""?((d=(i=window.$message)==null?void 0:i.error)==null||d.call(i,l("form.email.required")),!1):me.test(n)?!0:((o=(s=window.$message)==null?void 0:s.error)==null||o.call(s,l("form.email.invalid")),!1)}function w(n){var i,d,s,o;return n.trim()===""?((d=(i=window.$message)==null?void 0:i.error)==null||d.call(i,l("form.phone.required")),!1):fe.test(n)?!0:((o=(s=window.$message)==null?void 0:s.error)==null||o.call(s,l("form.phone.invalid")),!1)}async function S(n,i){var s,o;let d;if(n==="email"?d=m(i):d=w(i),!(!d||b.value)){_();try{const f={verificationType:n,email:i},{data:h,error:L}=await ee(f);L||((o=(s=window.$message)==null?void 0:s.success)==null||o.call(s,l("page.login.codeLogin.sendCodeSuccess")),x.value=h==null?void 0:h.verificationUuid)}finally{C(),p()}}}return{label:v,start:C,stop:r,isCounting:k,loading:b,getCaptcha:S,verificationUuid:x}}const ze={class:"w-full flex-y-center gap-16px"},Ue=U({name:"CodeLogin",__name:"code-login",setup(b){const _=J(),{toggleLoginModule:p}=F(),{formRef:u,validate:C}=T(),{label:r,isCounting:k,loading:x,getCaptcha:v,verificationUuid:m}=H(),w=M({email:"",code:""}),S=$(()=>{const{formRules:i}=O();return{email:i.email,code:i.code}});async function n(){await C();const i={verificationCode:w.code,email:w.email,verificationUuid:m.value};await _.loginByCode(i)}return(i,d)=>{const s=D,o=V,f=I,h=q,L=K;return N(),E(L,{ref_key:"formRef",ref:u,model:w,rules:S.value,size:"large","show-label":!1,onKeyup:G(n,["enter"])},{default:t(()=>[a(o,{path:"email"},{default:t(()=>[a(s,{value:w.email,"onUpdate:value":d[0]||(d[0]=R=>w.email=R),placeholder:e(l)("page.login.common.emailPlaceholder")},null,8,["value","placeholder"])]),_:1}),a(o,{path:"code"},{default:t(()=>[c("div",ze,[a(s,{value:w.code,"onUpdate:value":d[1]||(d[1]=R=>w.code=R),placeholder:e(l)("page.login.common.codePlaceholder")},null,8,["value","placeholder"]),a(f,{size:"large",disabled:e(k),loading:e(x),onClick:d[2]||(d[2]=R=>e(v)("email",w.email))},{default:t(()=>[P(y(e(r)),1)]),_:1},8,["disabled","loading"])])]),_:1}),a(h,{vertical:"",size:18,class:"w-full"},{default:t(()=>[a(f,{type:"primary",size:"large",round:"",block:"",loading:e(_).loginLoading,onClick:n},{default:t(()=>[P(y(e(l)("common.confirm")),1)]),_:1},8,["loading"]),a(f,{size:"large",round:"",block:"",onClick:d[3]||(d[3]=R=>e(p)("pwd-login"))},{default:t(()=>[P(y(e(l)("page.login.common.back")),1)]),_:1})]),_:1})]),_:1},8,["model","rules"])}}}),Be={class:"w-full flex-y-center gap-16px"},Ee=U({name:"Register",__name:"register",setup(b){const{toggleLoginModule:_}=F(),{formRef:p,validate:u}=T(),{label:C,isCounting:r,loading:k,getCaptcha:x,verificationUuid:v}=H(),{loading:m,startLoading:w,endLoading:S}=j(),n=M({email:"",code:"",username:"",password:"",confirmPassword:""}),i=$(()=>{const{formRules:s,createConfirmPwdRule:o}=O();return{email:s.email,code:s.code,username:s.username,password:s.pwd,confirmPassword:o(n.password)}});async function d(){var f;await u();const s={verificationCode:n.code,username:n.username,password:n.password,email:n.email,verificationUuid:v.value};w();const{error:o}=await oe(s);o||((f=window.$message)==null||f.success(l("page.login.common.registerSuccess")),await _("pwd-login")),S()}return(s,o)=>{const f=D,h=V,L=I,R=q,A=K;return N(),E(A,{ref_key:"formRef",ref:p,model:n,rules:i.value,size:"large","show-label":!1,onKeyup:G(d,["enter"])},{default:t(()=>[a(h,{path:"username"},{default:t(()=>[a(f,{value:n.username,"onUpdate:value":o[0]||(o[0]=g=>n.username=g),placeholder:e(l)("page.login.common.usernamePlaceholder")},null,8,["value","placeholder"])]),_:1}),a(h,{path:"password"},{default:t(()=>[a(f,{value:n.password,"onUpdate:value":o[1]||(o[1]=g=>n.password=g),type:"password","show-password-on":"click",placeholder:e(l)("page.login.common.passwordPlaceholder")},null,8,["value","placeholder"])]),_:1}),a(h,{path:"confirmPassword"},{default:t(()=>[a(f,{value:n.confirmPassword,"onUpdate:value":o[2]||(o[2]=g=>n.confirmPassword=g),type:"password","show-password-on":"click",placeholder:e(l)("page.login.common.confirmPasswordPlaceholder")},null,8,["value","placeholder"])]),_:1}),a(h,{path:"email"},{default:t(()=>[a(f,{value:n.email,"onUpdate:value":o[3]||(o[3]=g=>n.email=g),placeholder:e(l)("page.login.common.emailPlaceholder")},null,8,["value","placeholder"])]),_:1}),a(h,{path:"code"},{default:t(()=>[c("div",Be,[a(f,{value:n.code,"onUpdate:value":o[4]||(o[4]=g=>n.code=g),placeholder:e(l)("page.login.common.codePlaceholder")},null,8,["value","placeholder"]),a(L,{size:"large",disabled:e(r),loading:e(k),onClick:o[5]||(o[5]=g=>e(x)("email",n.email))},{default:t(()=>[P(y(e(C)),1)]),_:1},8,["disabled","loading"])])]),_:1}),a(R,{vertical:"",size:18,class:"w-full"},{default:t(()=>[a(L,{type:"primary",size:"large",round:"",block:"",loading:e(m),onClick:d},{default:t(()=>[P(y(e(l)("common.confirm")),1)]),_:1},8,["loading"]),a(L,{size:"large",round:"",block:"",onClick:o[6]||(o[6]=g=>e(_)("pwd-login"))},{default:t(()=>[P(y(e(l)("page.login.common.back")),1)]),_:1})]),_:1})]),_:1},8,["model","rules"])}}}),Fe={class:"w-full flex-y-center gap-16px"},Me=U({name:"ResetPwd",__name:"reset-pwd",setup(b){const{toggleLoginModule:_}=F(),{formRef:p,validate:u}=T(),{label:C,isCounting:r,loading:k,getCaptcha:x,verificationUuid:v}=H(),{loading:m,startLoading:w,endLoading:S}=j(),n=M({email:"",code:"",password:"",confirmPassword:""}),i=$(()=>{const{formRules:s,createConfirmPwdRule:o}=O();return{phone:s.phone,password:s.pwd,confirmPassword:o(n.password)}});async function d(){var f;await u();const s={verificationCode:n.code,email:n.email,verificationUuid:v.value,password:n.password};w();const{error:o}=await ne(s);o||((f=window.$message)==null||f.success(l("common.modifySuccess")),await _("pwd-login")),S()}return(s,o)=>{const f=D,h=V,L=I,R=q,A=K;return N(),E(A,{ref_key:"formRef",ref:p,model:n,rules:i.value,size:"large","show-label":!1,onKeyup:G(d,["enter"])},{default:t(()=>[a(h,{path:"email"},{default:t(()=>[a(f,{value:n.email,"onUpdate:value":o[0]||(o[0]=g=>n.email=g),placeholder:e(l)("page.login.common.emailPlaceholder")},null,8,["value","placeholder"])]),_:1}),a(h,{path:"code"},{default:t(()=>[c("div",Fe,[a(f,{value:n.code,"onUpdate:value":o[1]||(o[1]=g=>n.code=g),placeholder:e(l)("page.login.common.codePlaceholder")},null,8,["value","placeholder"]),a(L,{size:"large",disabled:e(r),loading:e(k),onClick:o[2]||(o[2]=g=>e(x)("email",n.email))},{default:t(()=>[P(y(e(C)),1)]),_:1},8,["disabled","loading"])])]),_:1}),a(h,{path:"password"},{default:t(()=>[a(f,{value:n.password,"onUpdate:value":o[3]||(o[3]=g=>n.password=g),type:"password","show-password-on":"click",placeholder:e(l)("page.login.common.passwordPlaceholder")},null,8,["value","placeholder"])]),_:1}),a(h,{path:"confirmPassword"},{default:t(()=>[a(f,{value:n.confirmPassword,"onUpdate:value":o[4]||(o[4]=g=>n.confirmPassword=g),type:"password","show-password-on":"click",placeholder:e(l)("page.login.common.confirmPasswordPlaceholder")},null,8,["value","placeholder"])]),_:1}),a(R,{vertical:"",size:18,class:"w-full"},{default:t(()=>[a(L,{type:"primary",size:"large",round:"",block:"",loading:e(m),onClick:d},{default:t(()=>[P(y(e(l)("common.confirm")),1)]),_:1},8,["loading"]),a(L,{size:"large",round:"",block:"",onClick:o[5]||(o[5]=g=>e(_)("pwd-login"))},{default:t(()=>[P(y(e(l)("page.login.common.back")),1)]),_:1})]),_:1})]),_:1},8,["model","rules"])}}}),De=U({name:"BindWechat",__name:"bind-wechat",setup(b){return(_,p)=>(N(),B("div"))}}),Ie={class:"w-400px lt-sm:w-300px"},Ge={class:"flex-y-center justify-between"},Te={class:"text-28px text-primary font-500 lt-sm:text-22px"},Oe={class:"i-flex-col"},Ve={class:"pt-24px"},Ke={class:"text-18px text-primary font-medium"},qe={class:"pt-24px"},He=U({name:"login",__name:"index",props:{module:{}},setup(b){const _=b,p=ae(),u=te(),C={"pwd-login":{label:z["pwd-login"],component:Re},"code-login":{label:z["code-login"],component:Ue},register:{label:z.register,component:Ee},"reset-pwd":{label:z["reset-pwd"],component:Me},"bind-wechat":{label:z["bind-wechat"],component:De}},r=$(()=>C[_.module||"pwd-login"]),k=$(()=>u.darkMode?W(u.themeColor,600):u.themeColor),x=$(()=>{const v="#ffffff",m=u.darkMode?.5:.2;return le(v,u.themeColor,m)});return(v,m)=>{const w=$e,S=se,n=ie,i=re,d=pe;return N(),B("div",{class:"relative size-full flex-center overflow-hidden",style:ue({backgroundColor:x.value})},[a(w,{"theme-color":k.value},null,8,["theme-color"]),a(d,{bordered:!1,class:"relative z-4 w-auto rd-12px"},{default:t(()=>[c("div",Ie,[c("header",Ge,[a(S,{class:"text-64px text-primary lt-sm:text-48px"}),c("h3",Te,y(e(l)("system.title")),1),c("div",Oe,[a(n,{"theme-schema":e(u).themeScheme,"show-tooltip":!1,class:"text-20px lt-sm:text-18px",onSwitch:e(u).toggleThemeScheme},null,8,["theme-schema","onSwitch"]),a(i,{lang:e(p).locale,"lang-options":e(p).localeOptions,"show-tooltip":!1,onChangeLang:e(p).changeLocale},null,8,["lang","lang-options","onChangeLang"])])]),c("main",Ve,[c("h3",Ke,y(e(l)(r.value.label)),1),c("div",qe,[a(de,{name:e(u).page.animateMode,mode:"out-in",appear:""},{default:t(()=>[(N(),E(ce(r.value.component)))]),_:1},8,["name"])])])])]),_:1})],4)}}});export{He as default};
