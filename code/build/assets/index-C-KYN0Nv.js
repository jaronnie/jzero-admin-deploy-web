import{A as ta,m as na,e as la,a as oa,G as ra,b as sa,E as ua,_ as ia,c as da,d as pa,f as ca,u as ma,g as ga,h as fa,i as va,j as ha,N as ya,D as De,k as ba,l as _a,n as Ia}from"./business-DpfmsGGm.js";import{d as ae,a1 as y,L as E,M as xe,K as F,N as X,O as de,U as je,ag as Pa,a8 as Fe,ah as Ta,a6 as ze,ai as ka,aj as Na,ak as Ra,al as wa,am as Ca,aa as Oa,ab as we,v as fe,an as Va,r as re,a9 as ce,ao as $a,V as qe,a as L,Y as Aa,ap as Da,B as z,aq as Me,ar as Ee,as as _e,at as Ie,au as xa,av as ie,aw as Ue,ax as Ma,ay as Pe,az as Ea,ae as Ua,o as w,b as se,e as Ge,aA as R,aB as Se,aC as Sa,y as Ba,$ as n,p as We,f as a,_ as Re,aD as Be,c as M,w as c,g as Le,t as Ke,h as o,a3 as Te,a4 as me,aE as Z,aF as La,aG as Ka,aH as ja,aI as Fa,A as za,aJ as qa,aK as ke,a5 as Ne,J as Ga,aL as Wa}from"./index-Dur8ZDqx.js";import{u as Ya,a as Ha,b as Ja}from"./form-Dx558x_r.js";import{_ as Xa}from"./Space--i9eSbh2.js";import{a as Qa}from"./Grid-DI5xQcf-.js";const Za=ae({name:"ArrowUp",render(){return y("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20"},y("g",{fill:"none"},y("path",{d:"M3.13 9.163a.5.5 0 1 0 .74.674L9.5 3.67V17.5a.5.5 0 0 0 1 0V3.672l5.63 6.165a.5.5 0 0 0 .738-.674l-6.315-6.916a.746.746 0 0 0-.632-.24a.746.746 0 0 0-.476.24L3.131 9.163z",fill:"currentColor"})))}}),P="0!important",Ye="-1px!important";function le(l){return X(`${l}-type`,[F("& +",[E("button",{},[X(`${l}-type`,[de("border",{borderLeftWidth:P}),de("state-border",{left:Ye})])])])])}function oe(l){return X(`${l}-type`,[F("& +",[E("button",[X(`${l}-type`,[de("border",{borderTopWidth:P}),de("state-border",{top:Ye})])])])])}const et=E("button-group",`
 flex-wrap: nowrap;
 display: inline-flex;
 position: relative;
`,[xe("vertical",{flexDirection:"row"},[xe("rtl",[E("button",[F("&:first-child:not(:last-child)",`
 margin-right: ${P};
 border-top-right-radius: ${P};
 border-bottom-right-radius: ${P};
 `),F("&:last-child:not(:first-child)",`
 margin-left: ${P};
 border-top-left-radius: ${P};
 border-bottom-left-radius: ${P};
 `),F("&:not(:first-child):not(:last-child)",`
 margin-left: ${P};
 margin-right: ${P};
 border-radius: ${P};
 `),le("default"),X("ghost",[le("primary"),le("info"),le("success"),le("warning"),le("error")])])])]),X("vertical",{flexDirection:"column"},[E("button",[F("&:first-child:not(:last-child)",`
 margin-bottom: ${P};
 margin-left: ${P};
 margin-right: ${P};
 border-bottom-left-radius: ${P};
 border-bottom-right-radius: ${P};
 `),F("&:last-child:not(:first-child)",`
 margin-top: ${P};
 margin-left: ${P};
 margin-right: ${P};
 border-top-left-radius: ${P};
 border-top-right-radius: ${P};
 `),F("&:not(:first-child):not(:last-child)",`
 margin: ${P};
 border-radius: ${P};
 `),oe("default"),X("ghost",[oe("primary"),oe("info"),oe("success"),oe("warning"),oe("error")])])])]),at={size:{type:String,default:void 0},vertical:Boolean},tt=ae({name:"ButtonGroup",props:at,setup(l){const{mergedClsPrefixRef:f,mergedRtlRef:m}=je(l);return Pa("-button-group",et,f),Fe(Ta,l),{rtlEnabled:ze("ButtonGroup",m,f),mergedClsPrefix:f}},render(){const{mergedClsPrefix:l}=this;return y("div",{class:[`${l}-button-group`,this.rtlEnabled&&`${l}-button-group--rtl`,this.vertical&&`${l}-button-group--vertical`],role:"group"},this.$slots)}});function nt(){return Ca}const lt=ka({name:"DynamicInput",common:Na,peers:{Input:Ra,Button:wa},self:nt}),Ce=Oa("n-dynamic-input"),ot=ae({name:"DynamicInputInputPreset",props:{clsPrefix:{type:String,required:!0},value:{type:String,default:""},disabled:Boolean,parentPath:String,path:String,onUpdateValue:{type:Function,required:!0}},setup(){const{mergedThemeRef:l,placeholderRef:f}=we(Ce);return{mergedTheme:l,placeholder:f}},render(){const{mergedTheme:l,placeholder:f,value:m,clsPrefix:g,onUpdateValue:v,disabled:D}=this;return y("div",{class:`${g}-dynamic-input-preset-input`},y(fe,{theme:l.peers.Input,"theme-overrides":l.peerOverrides.Input,value:m,placeholder:f,onUpdateValue:v,disabled:D}))}}),rt=ae({name:"DynamicInputPairPreset",props:{clsPrefix:{type:String,required:!0},value:{type:Object,default:()=>({key:"",value:""})},disabled:Boolean,parentPath:String,path:String,onUpdateValue:{type:Function,required:!0}},setup(l){const{mergedThemeRef:f,keyPlaceholderRef:m,valuePlaceholderRef:g}=we(Ce);return{mergedTheme:f,keyPlaceholder:m,valuePlaceholder:g,handleKeyInput(v){l.onUpdateValue({key:v,value:l.value.value})},handleValueInput(v){l.onUpdateValue({key:l.value.key,value:v})}}},render(){const{mergedTheme:l,keyPlaceholder:f,valuePlaceholder:m,value:g,clsPrefix:v,disabled:D}=this;return y("div",{class:`${v}-dynamic-input-preset-pair`},y(fe,{theme:l.peers.Input,"theme-overrides":l.peerOverrides.Input,value:g.key,class:`${v}-dynamic-input-pair-input`,placeholder:f,onUpdateValue:this.handleKeyInput,disabled:D}),y(fe,{theme:l.peers.Input,"theme-overrides":l.peerOverrides.Input,value:g.value,class:`${v}-dynamic-input-pair-input`,placeholder:m,onUpdateValue:this.handleValueInput,disabled:D}))}}),st=E("dynamic-input",{width:"100%"},[E("dynamic-input-item",`
 margin-bottom: 10px;
 display: flex;
 flex-wrap: nowrap;
 `,[E("dynamic-input-preset-input",{flex:1,alignItems:"center"}),E("dynamic-input-preset-pair",`
 flex: 1;
 display: flex;
 align-items: center;
 `,[E("dynamic-input-pair-input",[F("&:first-child",{"margin-right":"12px"})])]),de("action",`
 align-self: flex-start;
 display: flex;
 justify-content: flex-end;
 flex-shrink: 0;
 flex-grow: 0;
 margin: var(--action-margin);
 `,[X("icon",{cursor:"pointer"})]),F("&:last-child",{marginBottom:0})]),E("form-item",`
 padding-top: 0 !important;
 margin-right: 0 !important;
 `,[E("form-item-blank",{paddingTop:"0 !important"})])]),ge=new WeakMap,ut=Object.assign(Object.assign({},qe.props),{max:Number,min:{type:Number,default:0},value:Array,defaultValue:{type:Array,default:()=>[]},preset:{type:String,default:"input"},keyField:String,itemClass:String,itemStyle:[String,Object],keyPlaceholder:{type:String,default:""},valuePlaceholder:{type:String,default:""},placeholder:{type:String,default:""},disabled:Boolean,showSortButton:Boolean,createButtonProps:Object,onCreate:Function,onRemove:Function,"onUpdate:value":[Function,Array],onUpdateValue:[Function,Array],onClear:Function,onInput:[Function,Array]}),it=ae({name:"DynamicInput",props:ut,setup(l,{slots:f}){const{mergedComponentPropsRef:m,mergedClsPrefixRef:g,mergedRtlRef:v,inlineThemeDisabled:D}=je(),C=we(Va,null),$=re(l.defaultValue),U=ce(l,"value"),O=$a(U,$),S=qe("DynamicInput","-dynamic-input",st,lt,l,g),k=L(()=>{const{value:p}=O;if(Array.isArray(p)){const{max:t}=l;return t!==void 0&&p.length>=t}return!1}),W=L(()=>{const{value:p}=O;return Array.isArray(p)?p.length<=l.min:!0}),e=L(()=>{var p,t;return(t=(p=m==null?void 0:m.value)===null||p===void 0?void 0:p.DynamicInput)===null||t===void 0?void 0:t.buttonSize});function V(p){const{onInput:t,"onUpdate:value":d,onUpdateValue:s}=l;t&&Pe(t,p),d&&Pe(d,p),s&&Pe(s,p),$.value=p}function Y(p,t){if(p==null||typeof p!="object")return t;const d=_e(p)?Ie(p):p;let s=ge.get(d);return s===void 0&&ge.set(d,s=xa()),s}function x(p,t){const{value:d}=O,s=Array.from(d??[]),T=s[p];if(s[p]=t,T&&t&&typeof T=="object"&&typeof t=="object"){const G=_e(T)?Ie(T):T,B=_e(t)?Ie(t):t,ue=ge.get(G);ue!==void 0&&ge.set(B,ue)}V(s)}function H(){A(-1)}function A(p){const{value:t}=O,{onCreate:d}=l,s=Array.from(t??[]);if(d)s.splice(p+1,0,d(p+1)),V(s);else if(f.default)s.splice(p+1,0,null),V(s);else switch(l.preset){case"input":s.splice(p+1,0,""),V(s);break;case"pair":s.splice(p+1,0,{key:"",value:""}),V(s);break}}function K(p){const{value:t}=O;if(!Array.isArray(t))return;const{min:d}=l;if(t.length<=d)return;const{onRemove:s}=l;s&&s(p);const T=Array.from(t);T.splice(p,1),V(T)}function b(p,t,d){if(t<0||d<0||t>=p.length||d>=p.length||t===d)return;const s=p[t];p[t]=p[d],p[d]=s}function q(p,t){const{value:d}=O;if(!Array.isArray(d))return;const s=Array.from(d);p==="up"&&b(s,t,t-1),p==="down"&&b(s,t,t+1),V(s)}Fe(Ce,{mergedThemeRef:S,keyPlaceholderRef:ce(l,"keyPlaceholder"),valuePlaceholderRef:ce(l,"valuePlaceholder"),placeholderRef:ce(l,"placeholder")});const te=ze("DynamicInput",v,g),J=L(()=>{const{self:{actionMargin:p,actionMarginRtl:t}}=S.value;return{"--action-margin":p,"--action-margin-rtl":t}}),j=D?Aa("dynamic-input",void 0,J,l):void 0;return{locale:Da("DynamicInput").localeRef,rtlEnabled:te,buttonSize:e,mergedClsPrefix:g,NFormItem:C,uncontrolledValue:$,mergedValue:O,insertionDisabled:k,removeDisabled:W,handleCreateClick:H,ensureKey:Y,handleValueChange:x,remove:K,move:q,createItem:A,mergedTheme:S,cssVars:D?void 0:J,themeClass:j==null?void 0:j.themeClass,onRender:j==null?void 0:j.onRender}},render(){const{$slots:l,itemClass:f,buttonSize:m,mergedClsPrefix:g,mergedValue:v,locale:D,mergedTheme:C,keyField:$,itemStyle:U,preset:O,showSortButton:S,NFormItem:k,ensureKey:W,handleValueChange:e,remove:V,createItem:Y,move:x,onRender:H,disabled:A}=this;return H==null||H(),y("div",{class:[`${g}-dynamic-input`,this.rtlEnabled&&`${g}-dynamic-input--rtl`,this.themeClass],style:this.cssVars},!Array.isArray(v)||v.length===0?y(z,Object.assign({block:!0,ghost:!0,dashed:!0,size:m},this.createButtonProps,{disabled:this.insertionDisabled||A,theme:C.peers.Button,themeOverrides:C.peerOverrides.Button,onClick:this.handleCreateClick}),{default:()=>Me(l["create-button-default"],()=>[D.create]),icon:()=>Me(l["create-button-icon"],()=>[y(ie,{clsPrefix:g},{default:()=>y(Ue,null)})])}):v.map((K,b)=>y("div",{key:$?K[$]:W(K,b),"data-key":$?K[$]:W(K,b),class:[`${g}-dynamic-input-item`,f],style:U},Ee(l.default,{value:v[b],index:b},()=>[O==="input"?y(ot,{disabled:A,clsPrefix:g,value:v[b],parentPath:k?k.path.value:void 0,path:k!=null&&k.path.value?`${k.path.value}[${b}]`:void 0,onUpdateValue:q=>{e(b,q)}}):O==="pair"?y(rt,{disabled:A,clsPrefix:g,value:v[b],parentPath:k?k.path.value:void 0,path:k!=null&&k.path.value?`${k.path.value}[${b}]`:void 0,onUpdateValue:q=>{e(b,q)}}):null]),Ee(l.action,{value:v[b],index:b,create:Y,remove:V,move:x},()=>[y("div",{class:`${g}-dynamic-input-item__action`},y(tt,{size:m},{default:()=>[y(z,{disabled:this.removeDisabled||A,theme:C.peers.Button,themeOverrides:C.peerOverrides.Button,circle:!0,onClick:()=>{V(b)}},{icon:()=>y(ie,{clsPrefix:g},{default:()=>y(Ma,null)})}),y(z,{disabled:this.insertionDisabled||A,circle:!0,theme:C.peers.Button,themeOverrides:C.peerOverrides.Button,onClick:()=>{Y(b)}},{icon:()=>y(ie,{clsPrefix:g},{default:()=>y(Ue,null)})}),S?y(z,{disabled:b===0||A,circle:!0,theme:C.peers.Button,themeOverrides:C.peerOverrides.Button,onClick:()=>{x("up",b)}},{icon:()=>y(ie,{clsPrefix:g},{default:()=>y(Za,null)})}):null,S?y(z,{disabled:b===v.length-1||A,circle:!0,theme:C.peers.Button,themeOverrides:C.peerOverrides.Button,onClick:()=>{x("down",b)}},{icon:()=>y(ie,{clsPrefix:g},{default:()=>y(ta,null)})}):null]}))]))))}}),He={Y:"common.yesOrNo.yes",N:"common.yesOrNo.no"};Ea(He);const dt={class:"inline-block",viewBox:"0 0 24 24",width:"1em",height:"1em"};function pt(l,f){return w(),se("svg",dt,f[0]||(f[0]=[Ge("path",{fill:"currentColor",d:"M18 13H6c-.55 0-1-.45-1-1s.45-1 1-1h12c.55 0 1 .45 1 1s-.45 1-1 1"},null,-1)]))}const ct=Ua({name:"ic-round-remove",render:pt});function mt(){return Object.keys(Object.assign({"/src/assets/svg-icon/activity.svg":()=>R(()=>import("./activity-B4XY664I.js"),[]),"/src/assets/svg-icon/at-sign.svg":()=>R(()=>import("./at-sign-DvqQw7Qx.js"),[]),"/src/assets/svg-icon/avatar.svg":()=>R(()=>import("./avatar-CQqEtg-V.js"),[]),"/src/assets/svg-icon/banner.svg":()=>R(()=>import("./banner-CFFAqDOx.js"),[]),"/src/assets/svg-icon/cast.svg":()=>R(()=>import("./cast-n3EmpXB4.js"),[]),"/src/assets/svg-icon/chrome.svg":()=>R(()=>import("./chrome-BM_Le6p_.js"),[]),"/src/assets/svg-icon/copy.svg":()=>R(()=>import("./copy-BsYpLlfM.js"),[]),"/src/assets/svg-icon/custom-icon.svg":()=>R(()=>import("./custom-icon-857Ak5pp.js"),[]),"/src/assets/svg-icon/empty-data.svg":()=>R(()=>import("./empty-data-Df-AtTS4.js"),[]),"/src/assets/svg-icon/expectation.svg":()=>R(()=>import("./expectation-BuEJD7SN.js"),[]),"/src/assets/svg-icon/heart.svg":()=>R(()=>import("./heart-DOH2U7VV.js"),[]),"/src/assets/svg-icon/logo.svg":()=>R(()=>import("./logo-BeLY4cv9.js"),[]),"/src/assets/svg-icon/network-error.svg":()=>R(()=>import("./network-error-DDJxZniG.js"),[]),"/src/assets/svg-icon/no-icon.svg":()=>R(()=>import("./no-icon-lf9QfDPR.js"),[]),"/src/assets/svg-icon/no-permission.svg":()=>R(()=>import("./no-permission-CgHwmHj5.js"),[]),"/src/assets/svg-icon/not-found.svg":()=>R(()=>import("./not-found-qgwLoIvx.js"),[]),"/src/assets/svg-icon/service-error.svg":()=>R(()=>import("./service-error-BlNULCLM.js"),[]),"/src/assets/svg-icon/wind.svg":()=>R(()=>import("./wind-Dy5zdHKW.js"),[])})).map(m=>{var g;return((g=m.split("/").at(-1))==null?void 0:g.replace(".svg",""))||""}).filter(Boolean)}const ve="layout.",he="view.",Je="$";function gt(l){let f="",m="";const[g="",v=""]=(l==null?void 0:l.split(Je))||[];return f=ft(g),m=vt(v||g),{layout:f,page:m}}function ft(l){return l.startsWith(ve)?l.replace(ve,""):""}function vt(l){return l.startsWith(he)?l.replace(he,""):""}function ht(l,f){const m=!!l,g=!!f;return m&&g?`${ve}${l}${Je}${he}${f}`:m?`${ve}${l}`:g?`${he}${f}`:""}function yt(l){return`/${l.replace(/_/g,"/")}`}function bt(l){const[f,m=""]=l.split("/:");return{path:f,param:m}}function _t(l,f){return f.trim()?`${l}/:${f}`:l}const It={class:"flex-y-center flex-1 gap-12px"},Pt=ae({name:"MenuOperateModal",__name:"menu-operate-modal",props:Se({operateType:{},rowData:{},allPages:{}},{visible:{type:Boolean,default:!1},visibleModifiers:{}}),emits:Se(["submitted"],["update:visible"]),setup(l,{emit:f}){const m=l,g=f,v=Sa(l,"visible"),{formRef:D,validate:C,restoreValidation:$}=Ya(),{defaultRequiredRule:U}=Ha(),{loading:O,startLoading:S,endLoading:k}=Ba(),W=L(()=>({add:n("page.manage.menu.addMenu"),addChild:n("page.manage.menu.addChildMenu"),edit:n("page.manage.menu.editMenu")})[m.operateType]),e=We(V());function V(){return{menuType:"1",menuName:"",routeName:"",routePath:"",pathParam:"",component:"",layout:"",page:"",i18nKey:null,icon:"",iconType:"1",parentId:0,status:"1",keepAlive:!1,constant:!1,order:0,href:null,hideInMenu:!1,activeMenu:null,multiTab:!1,fixedIndexInTab:null,query:[],buttonCode:"",permissions:[]}}const Y={menuName:U,status:U,routeName:U,routePath:U},x=L(()=>m.operateType==="edit"),A=mt().map(_=>({label:()=>a("div",{class:"flex-y-center gap-16px"},[a(Re,{localIcon:_,class:"text-icon"},null),a("span",null,[_])]),value:_})),K=L(()=>e.parentId===0),b=L(()=>e.menuType==="2"),q=L(()=>e.menuType==="1"||e.menuType==="2"),te=L(()=>e.menuType==="2"||e.menuType==="3"),J=L(()=>{const _=[...m.allPages];return e.routeName&&!_.includes(e.routeName)&&_.unshift(e.routeName),_.includes("iframe-page")||_.push("iframe-page"),_.map(I=>({label:I,value:I}))}),j=[{label:"base",value:"base"},{label:"blank",value:"blank"}],p=re([]);async function t(){const{error:_,data:i}=await ra();if(!_){const I=i.map(u=>({label:u.roleName,value:u.roleCode}));p.value=[...I]}}function d(){if(Object.assign(e,V()),!!m.rowData){if(m.operateType==="addChild"){const{id:_}=m.rowData;Object.assign(e,{parentId:_})}if(m.operateType==="edit"){const{component:_,...i}=m.rowData,{layout:I,page:u}=gt(_),{path:h,param:N}=bt(i.routePath);Object.assign(e,i,{layout:I,page:u,routePath:h,pathParam:N})}e.query||(e.query=[]),e.permissions||(e.permissions=[])}}function s(){v.value=!1}function T(){e.routeName?e.routePath=yt(e.routeName):e.routePath=""}function G(){e.routeName?e.i18nKey=`route.${e.routeName}`:e.i18nKey=null}function B(){return{code:"",desc:""}}function ue(){const{layout:_,page:i,pathParam:I,...u}=e,h=ht(_,i),N=_t(e.routePath,I);return u.component=h,u.routePath=N,u}async function Xe(){var _,i,I;if(m.operateType==="add"||m.operateType==="addChild"){await C();const u=ue(),h={activeMenu:u.activeMenu,menuType:u.menuType,menuName:u.menuName,routeName:u.routeName,routePath:u.routePath,component:u.component,icon:u.icon,iconType:u.iconType,parentId:u.parentId,status:u.status,keepAlive:u.keepAlive,constant:u.constant,order:u.order,hideInMenu:u.hideInMenu,href:u.href,mutiTab:u.multiTab,fixedIndexInTab:u.fixedIndexInTab,query:u.query,buttonCode:u.buttonCode,permissions:u.permissions,i18nKey:u.i18nKey};S();const{error:N}=await sa(h);k(),N||((_=window.$message)==null||_.success(n("common.addSuccess")),s(),g("submitted"))}else if(m.operateType==="edit"){await C();const u=ue(),h={id:(i=m.rowData)==null?void 0:i.id,activeMenu:u.activeMenu,menuType:u.menuType,menuName:u.menuName,routeName:u.routeName,routePath:u.routePath,component:u.component,icon:u.icon,iconType:u.iconType,parentId:u.parentId,status:u.status,keepAlive:u.keepAlive,constant:u.constant,order:u.order,hideInMenu:u.hideInMenu,href:u.href,mutiTab:u.multiTab,fixedIndexInTab:u.fixedIndexInTab,query:u.query,buttonCode:u.buttonCode,permissions:u.permissions,i18nKey:u.i18nKey};S();const{error:N}=await ua(h);k(),N||((I=window.$message)==null||I.success(n("common.editSuccess")),s(),g("submitted"))}}return Be(v,()=>{v.value&&(d(),$(),t())}),Be(()=>e.routeName,()=>{T(),G()}),(_,i)=>{const I=ia,u=da,h=pa,N=fe,Oe=La,pe=Ka,Ve=ca,ne=z,$e=ct,ye=Xa,Ae=it,Qe=Qa,Ze=Ja,ea=ja,aa=Fa;return w(),M(aa,{show:v.value,"onUpdate:show":i[23]||(i[23]=r=>v.value=r),title:W.value,preset:"card",class:"w-800px"},{footer:c(()=>[a(ye,{justify:"end",size:16},{default:c(()=>[a(ne,{onClick:s},{default:c(()=>[Le(Ke(o(n)("common.cancel")),1)]),_:1}),a(ne,{loading:o(O),type:"primary",onClick:Xe},{default:c(()=>[Le(Ke(o(n)("common.confirm")),1)]),_:1},8,["loading"])]),_:1})]),default:c(()=>[a(ea,{class:"h-480px pr-20px"},{default:c(()=>[a(Ze,{ref_key:"formRef",ref:D,model:e,rules:Y,"label-placement":"left","label-width":100},{default:c(()=>[a(Qe,{responsive:"screen","item-responsive":""},{default:c(()=>[a(h,{span:"24 m:12",label:o(n)("page.manage.menu.menuType"),path:"menuType"},{default:c(()=>[a(u,{value:e.menuType,"onUpdate:value":i[0]||(i[0]=r=>e.menuType=r),disabled:x.value},{default:c(()=>[(w(!0),se(me,null,Te(o(na),r=>(w(),M(I,{key:r.value,value:r.value,label:o(n)(r.label)},null,8,["value","label"]))),128))]),_:1},8,["value","disabled"])]),_:1},8,["label"]),a(h,{span:"24 m:12",label:o(n)("page.manage.menu.menuName"),path:"menuName"},{default:c(()=>[a(N,{value:e.menuName,"onUpdate:value":i[1]||(i[1]=r=>e.menuName=r),placeholder:o(n)("page.manage.menu.form.menuName")},null,8,["value","placeholder"])]),_:1},8,["label"]),a(h,{span:"24 m:12",label:o(n)("page.manage.menu.menuStatus"),path:"status"},{default:c(()=>[a(u,{value:e.status,"onUpdate:value":i[2]||(i[2]=r=>e.status=r)},{default:c(()=>[(w(!0),se(me,null,Te(o(la),r=>(w(),M(I,{key:r.value,value:r.value,label:o(n)(r.label)},null,8,["value","label"]))),128))]),_:1},8,["value"])]),_:1},8,["label"]),a(h,{span:"24 m:12",label:o(n)("page.manage.menu.hideInMenu"),path:"hideInMenu"},{default:c(()=>[a(u,{value:e.hideInMenu,"onUpdate:value":i[3]||(i[3]=r=>e.hideInMenu=r)},{default:c(()=>[a(I,{value:!0,label:o(n)("common.yesOrNo.yes")},null,8,["label"]),a(I,{value:!1,label:o(n)("common.yesOrNo.no")},null,8,["label"])]),_:1},8,["value"])]),_:1},8,["label"]),a(h,{span:"24 m:12",label:o(n)("page.manage.menu.i18nKey"),path:"i18nKey"},{default:c(()=>[a(N,{value:e.i18nKey,"onUpdate:value":i[4]||(i[4]=r=>e.i18nKey=r),placeholder:o(n)("page.manage.menu.form.i18nKey")},null,8,["value","placeholder"])]),_:1},8,["label"]),a(h,{span:"24 m:12",label:o(n)("page.manage.menu.order"),path:"order"},{default:c(()=>[a(Oe,{value:e.order,"onUpdate:value":i[5]||(i[5]=r=>e.order=r),class:"w-full",placeholder:o(n)("page.manage.menu.form.order")},null,8,["value","placeholder"])]),_:1},8,["label"]),q.value?(w(),se(me,{key:0},[a(h,{span:"24 m:12",label:o(n)("page.manage.menu.routeName"),path:"routeName"},{default:c(()=>[a(N,{value:e.routeName,"onUpdate:value":i[6]||(i[6]=r=>e.routeName=r),placeholder:o(n)("page.manage.menu.form.routeName")},null,8,["value","placeholder"])]),_:1},8,["label"]),a(h,{span:"24 m:12",label:o(n)("page.manage.menu.routePath"),path:"routePath"},{default:c(()=>[a(N,{value:e.routePath,"onUpdate:value":i[7]||(i[7]=r=>e.routePath=r),disabled:"",placeholder:o(n)("page.manage.menu.form.routePath")},null,8,["value","placeholder"])]),_:1},8,["label"]),a(h,{span:"24 m:12",label:o(n)("page.manage.menu.pathParam"),path:"pathParam"},{default:c(()=>[a(N,{value:e.pathParam,"onUpdate:value":i[8]||(i[8]=r=>e.pathParam=r),placeholder:o(n)("page.manage.menu.form.pathParam")},null,8,["value","placeholder"])]),_:1},8,["label"]),K.value?(w(),M(h,{key:0,span:"24 m:12",label:o(n)("page.manage.menu.layout"),path:"layout"},{default:c(()=>[a(pe,{value:e.layout,"onUpdate:value":i[9]||(i[9]=r=>e.layout=r),options:j,placeholder:o(n)("page.manage.menu.form.layout")},null,8,["value","placeholder"])]),_:1},8,["label"])):Z("",!0),b.value?(w(),M(h,{key:1,span:"24 m:12",label:o(n)("page.manage.menu.page"),path:"page"},{default:c(()=>[a(pe,{value:e.page,"onUpdate:value":i[10]||(i[10]=r=>e.page=r),options:J.value,placeholder:o(n)("page.manage.menu.form.page")},null,8,["value","options","placeholder"])]),_:1},8,["label"])):Z("",!0),a(h,{span:"24 m:12",label:o(n)("page.manage.menu.iconTypeTitle"),path:"iconType"},{default:c(()=>[a(u,{value:e.iconType,"onUpdate:value":i[11]||(i[11]=r=>e.iconType=r)},{default:c(()=>[(w(!0),se(me,null,Te(o(oa),r=>(w(),M(I,{key:r.value,value:r.value,label:o(n)(r.label)},null,8,["value","label"]))),128))]),_:1},8,["value"])]),_:1},8,["label"]),a(h,{span:"24 m:12",label:o(n)("page.manage.menu.icon"),path:"icon"},{default:c(()=>[e.iconType==="1"?(w(),M(N,{key:0,value:e.icon,"onUpdate:value":i[12]||(i[12]=r=>e.icon=r),placeholder:o(n)("page.manage.menu.form.icon"),class:"flex-1"},{suffix:c(()=>[e.icon?(w(),M(Re,{key:0,icon:e.icon,class:"text-icon"},null,8,["icon"])):Z("",!0)]),_:1},8,["value","placeholder"])):Z("",!0),e.iconType==="2"?(w(),M(pe,{key:1,value:e.icon,"onUpdate:value":i[13]||(i[13]=r=>e.icon=r),placeholder:o(n)("page.manage.menu.form.localIcon"),options:o(A)},null,8,["value","placeholder","options"])):Z("",!0)]),_:1},8,["label"]),a(h,{span:"24 m:12",label:o(n)("page.manage.menu.keepAlive"),path:"keepAlive"},{default:c(()=>[a(u,{value:e.keepAlive,"onUpdate:value":i[14]||(i[14]=r=>e.keepAlive=r)},{default:c(()=>[a(I,{value:!0,label:o(n)("common.yesOrNo.yes")},null,8,["label"]),a(I,{value:!1,label:o(n)("common.yesOrNo.no")},null,8,["label"])]),_:1},8,["value"])]),_:1},8,["label"]),a(h,{span:"24 m:12",label:o(n)("page.manage.menu.constant"),path:"constant"},{default:c(()=>[a(u,{value:e.constant,"onUpdate:value":i[15]||(i[15]=r=>e.constant=r)},{default:c(()=>[a(I,{value:!0,label:o(n)("common.yesOrNo.yes")},null,8,["label"]),a(I,{value:!1,label:o(n)("common.yesOrNo.no")},null,8,["label"])]),_:1},8,["value"])]),_:1},8,["label"]),a(h,{span:"24 m:12",label:o(n)("page.manage.menu.href"),path:"href"},{default:c(()=>[a(N,{value:e.href,"onUpdate:value":i[16]||(i[16]=r=>e.href=r),placeholder:o(n)("page.manage.menu.form.href")},null,8,["value","placeholder"])]),_:1},8,["label"]),e.hideInMenu?(w(),M(h,{key:2,span:"24 m:12",label:o(n)("page.manage.menu.activeMenu"),path:"activeMenu"},{default:c(()=>[a(pe,{value:e.activeMenu,"onUpdate:value":i[17]||(i[17]=r=>e.activeMenu=r),options:J.value,clearable:"",placeholder:o(n)("page.manage.menu.form.activeMenu")},null,8,["value","options","placeholder"])]),_:1},8,["label"])):Z("",!0),a(h,{span:"24 m:12",label:o(n)("page.manage.menu.multiTab"),path:"multiTab"},{default:c(()=>[a(u,{value:e.multiTab,"onUpdate:value":i[18]||(i[18]=r=>e.multiTab=r)},{default:c(()=>[a(I,{value:!0,label:o(n)("common.yesOrNo.yes")},null,8,["label"]),a(I,{value:!1,label:o(n)("common.yesOrNo.no")},null,8,["label"])]),_:1},8,["value"])]),_:1},8,["label"]),a(h,{span:"24 m:12",label:o(n)("page.manage.menu.fixedIndexInTab"),path:"fixedIndexInTab"},{default:c(()=>[a(Oe,{value:e.fixedIndexInTab,"onUpdate:value":i[19]||(i[19]=r=>e.fixedIndexInTab=r),class:"w-full",clearable:"",placeholder:o(n)("page.manage.menu.form.fixedIndexInTab")},null,8,["value","placeholder"])]),_:1},8,["label"]),a(h,{span:"24",label:o(n)("page.manage.menu.query")},{default:c(()=>[a(Ae,{value:e.query,"onUpdate:value":i[20]||(i[20]=r=>e.query=r),preset:"pair","key-placeholder":o(n)("page.manage.menu.form.queryKey"),"value-placeholder":o(n)("page.manage.menu.form.queryValue")},{action:c(({index:r,create:Q,remove:be})=>[a(ye,{class:"ml-12px"},{default:c(()=>[a(ne,{size:"medium",onClick:()=>Q(r)},{default:c(()=>[a(Ve,{class:"text-icon"})]),_:2},1032,["onClick"]),a(ne,{size:"medium",onClick:()=>be(r)},{default:c(()=>[a($e,{class:"text-icon"})]),_:2},1032,["onClick"])]),_:2},1024)]),_:1},8,["value","key-placeholder","value-placeholder"])]),_:1},8,["label"])],64)):(w(),M(h,{key:1,span:"24 m:12",label:o(n)("page.manage.menu.buttonCode"),path:"buttonCode"},{default:c(()=>[a(N,{value:e.buttonCode,"onUpdate:value":i[21]||(i[21]=r=>e.buttonCode=r),placeholder:o(n)("page.manage.menu.form.buttonCode")},null,8,["value","placeholder"])]),_:1},8,["label"])),te.value?(w(),M(h,{key:2,span:"24",label:o(n)("page.manage.menu.permission")},{default:c(()=>[a(Ae,{value:e.permissions,"onUpdate:value":i[22]||(i[22]=r=>e.permissions=r),"on-create":B},{default:c(({value:r})=>[Ge("div",It,[a(N,{value:r.code,"onUpdate:value":Q=>r.code=Q,placeholder:o(n)("page.manage.menu.form.permissionCode"),class:"flex-1"},null,8,["value","onUpdate:value","placeholder"]),a(N,{value:r.desc,"onUpdate:value":Q=>r.desc=Q,placeholder:o(n)("page.manage.menu.form.permissionDesc"),class:"flex-1"},null,8,["value","onUpdate:value","placeholder"])])]),action:c(({index:r,create:Q,remove:be})=>[a(ye,{class:"ml-12px"},{default:c(()=>[a(ne,{size:"medium",onClick:()=>Q(r)},{default:c(()=>[a(Ve,{class:"text-icon"})]),_:2},1032,["onClick"]),a(ne,{size:"medium",onClick:()=>be(r)},{default:c(()=>[a($e,{class:"text-icon"})]),_:2},1032,["onClick"])]),_:2},1024)]),_:1},8,["value"])]),_:1},8,["label"])):Z("",!0)]),_:1})]),_:1},8,["model"])]),_:1})]),_:1},8,["show","title"])}}});function ee(l){return typeof l=="function"||Object.prototype.toString.call(l)==="[object Object]"&&!Wa(l)}const Ct=ae({name:"manage_menu",__name:"index",setup(l){const f=za(),m=We({}),{bool:g,setTrue:v}=qa(),D=re(null),{columns:C,columnChecks:$,data:U,loading:O,pagination:S,getData:k,getDataByPage:W}=ma({apiFn:fa,columns:()=>[{type:"selection",align:"center",width:48},{key:"id",title:n("page.manage.menu.id"),align:"center"},{key:"menuType",title:n("page.manage.menu.menuType"),align:"center",width:80,render:t=>{const d={1:"default",2:"primary",3:"primary"},s=n(va[t.menuType]);return a(Ne,{type:d[t.menuType]},ee(s)?s:{default:()=>[s]})}},{key:"menuName",title:n("page.manage.menu.menuName"),align:"center",minWidth:120,render:t=>{const{i18nKey:d,menuName:s}=t,T=d?n(d):s;return a("span",null,[T])}},{key:"icon",title:n("page.manage.menu.icon"),align:"center",width:60,render:t=>{const d=t.iconType==="1"?t.icon:void 0,s=t.iconType==="2"?t.icon:void 0;return a("div",{class:"flex-center"},[a(Re,{icon:d,localIcon:s,class:"text-icon"},null)])}},{key:"routeName",title:n("page.manage.menu.routeName"),align:"center",minWidth:120},{key:"routePath",title:n("page.manage.menu.routePath"),align:"center",minWidth:120},{key:"status",title:n("page.manage.menu.menuStatus"),align:"center",width:80,render:t=>{if(t.status===null)return null;const d={1:"success",2:"warning"},s=n(ha[t.status]);return a(Ne,{type:d[t.status]},ee(s)?s:{default:()=>[s]})}},{key:"hideInMenu",title:n("page.manage.menu.hideInMenu"),align:"center",width:80,render:t=>{const d=t.hideInMenu?"Y":"N",s={Y:"error",N:"default"},T=n(He[d]);return a(Ne,{type:s[d]},ee(T)?T:{default:()=>[T]})}},{key:"parentId",title:n("page.manage.menu.parentId"),width:90,align:"center"},{key:"order",title:n("page.manage.menu.order"),align:"center",width:60},{key:"operate",title:n("common.operate"),align:"center",width:230,render:t=>{let d,s,T;return a("div",{class:"flex-center justify-end gap-8px"},[t.menuType==="1"&&a(z,{type:"primary",ghost:!0,size:"small",onClick:()=>te(t)},ee(d=n("page.manage.menu.addChildMenu"))?d:{default:()=>[d]}),t.menuType==="2"&&a(z,{type:"primary",ghost:!0,size:"small",onClick:()=>te(t)},ee(s=n("page.manage.menu.addChildMenu"))?s:{default:()=>[s]}),a(z,{type:"primary",ghost:!0,size:"small",onClick:()=>q(t)},ee(T=n("common.edit"))?T:{default:()=>[T]}),a(ya,{onPositiveClick:()=>K(t.id)},{default:()=>n("common.confirmDelete"),trigger:()=>{let G;return a(z,{loading:m[t.id],type:"error",ghost:!0,size:"small"},ee(G=n("common.delete"))?G:{default:()=>[G]})}})])}}]}),{checkedRowKeys:e,onBatchDeleted:V,onDeleted:Y}=ga(U,k),x=re("add");function H(){x.value="add",v()}async function A(){const t=e.value.map(s=>Number.parseInt(s,10));t.forEach(s=>{m[s]=!0});const{error:d}=await De(t);t.forEach(s=>{m[s]=!1}),!d&&V()}async function K(t){const d=[t];m[t]=!0;const{error:s}=await De(d);m[t]=!1,!s&&Y()}const b=re(null);function q(t){x.value="edit",b.value={...t},v()}function te(t){x.value="addChild",b.value={...t},v()}const J=re([]);async function j(){const{data:t}=await Ia(0);J.value=t||[]}function p(){j()}return p(),(t,d)=>{const s=ba,T=_a,G=Ga;return w(),se("div",{ref_key:"wrapperRef",ref:D,class:"flex-col-stretch gap-16px overflow-hidden lt-sm:overflow-auto"},[a(G,{title:o(n)("page.manage.menu.title"),bordered:!1,size:"small",class:"sm:flex-1-hidden card-wrapper"},{"header-extra":c(()=>[a(s,{columns:o($),"onUpdate:columns":d[0]||(d[0]=B=>ke($)?$.value=B:null),"disabled-delete":o(e).length===0,loading:o(O),"add-auth":"manage:menu:add","delete-auth":"manage:menu:delete",onAdd:H,onDelete:A,onRefresh:o(k)},null,8,["columns","disabled-delete","loading","onRefresh"])]),default:c(()=>[a(T,{"checked-row-keys":o(e),"onUpdate:checkedRowKeys":d[1]||(d[1]=B=>ke(e)?e.value=B:null),columns:o(C),data:o(U),size:"small","flex-height":!o(f).isMobile,"scroll-x":1088,loading:o(O),"row-key":B=>B.id,remote:"",pagination:o(S),class:"sm:h-full"},null,8,["checked-row-keys","columns","data","flex-height","loading","row-key","pagination"]),a(Pt,{visible:o(g),"onUpdate:visible":d[2]||(d[2]=B=>ke(g)?g.value=B:null),"operate-type":x.value,"row-data":b.value,"all-pages":J.value,onSubmitted:o(W)},null,8,["visible","operate-type","row-data","all-pages","onSubmitted"])]),_:1},8,["title"])],512)}}});export{Ct as default};
